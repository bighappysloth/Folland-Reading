\documentclass[../main-v2-manifolds.tex]{subfiles}
% \usepackage{xcomment}
% \xcomment{definition,wts,lemma,corollary,note,figure}
\begin{document}
\fchapter{1: Manifolds}
% Introduce terminology. linear, toplinear, morphism, isomorphism. And Laut, List, etc. How List is open in the space of toplinear endomorphisms on a space $E$.
\topheader{Introduction}
We serve to give the reader the shortest introduction to manifold theory. This and the subsequent two chapters are loosely based on \cite{Lang2012Fundamentals,Lee2013Introduction}, and the symbols $E,F$ will always denote Banach spaces, and all Banach spaces are assumed to be over $\real$. We sometimes say $E$ (resp. $F$) is a space for brevity, and
\begin{itemize}
    \item $\mathcal{L}(E,F)$  = linear maps between $E$ and $F$, 
    \item $L(E,F)$ = toplinear (continuous and linear) maps between $E$ and $F$,
    \item $\Topliso(E,F)$ = toplinear isomorphisms between $E$ and $F$, 
    \item $\Laut(E)$ = toplinear automorphisms on $E$, which form a strongly open subset of $L(E,E)$.
\end{itemize}
We will be working in the category of $C^p$ Banach spaces --- where $p\geq 0$. The morphisms in the category of $\operatorname{Ban}_\real$ are called $C^p$ morphisms, which are $p$-times continuously differentiable functions. 
\begin{definition}[Morphisms between open subsets of Banach spaces]\label{def:cp-banach-space}
    Let $E$ and $F$ be Banach spaces, and $U\subseteq E$, $V\subseteq F$ be open subsets. A mapping $f: E\to F$ is of class $C^p$ if $f\in C(E,F)$ and \cref{eq:cp-banach-space-mapping} holds.
    \begin{equation}\label{eq:cp-banach-space-mapping}
        D^{(i)}f: E\to L^i(E,F)\qqtext{exists and is continuous for } i =\underline{p}
    \end{equation}
    $C^p(E,F)$ denotes the vector space of $C^p$ mappings between $E$ and $F$. Sometimes, we restrict our attention to \emph{open subsets} of $E$ and $F$, in this case: $f\in C^p(U,V)$ if $f\in C(U,V)$ and \cref{eq:cp-banach-space-mapping-local} holds.
    \begin{equation}\label{eq:cp-banach-space-mapping-local}
        D^{(i)}f: U\to L^i(E,F)\qqtext{exists and is continuous for }i = \underline{p}
    \end{equation}
    We sometimes write $C^p$ for $C^p(E,F)$ when it is clear. A \emph{$C^p$ isomorphism} is a bijective $C^p$ morphism whose inverse is also a morphism.
\end{definition}
\begin{remark}[Implicit assumption]\label{rmk:cp-banach-space-mapping-image-contained}
    In \cref{eq:cp-banach-space-mapping-local} we assumed that $f(U)\subseteq V$. This is a non-trivial part of the definition of $C^p$ morphisms between $E$ and $F$, we will come back to this in \cref{def:smoothness}.
\end{remark}
Let $f_1$ and $f_2$ be mappings, and $X$ a non-empty set.
\begin{itemize}
    \item We say they are \emph{composable} if either one of $f_2\circ f_1$ or $f_1\circ f_2$ makes sense. 
    \item We also write $f_2f_1$ to refer to $f_2\circ f_1$ if there is no ambiguity.
    \item If $U\subseteq X$ and $V\subseteq Y$, and $f: U\to V$ is a bijection --- meaning $f(U) = V$ and $f$ is injective, we say $f$ is a bijection between $U$ and $V$.
    \item With regards to inverse image notation, we allow ourselves to write 
    \[
        f_2^{-1}\circ f_1^{-1}\qqtext{is the same as} f_2^{-1}f_1^{-1}
    \]
    and inversion is never left associative.
    \[
        f_2f_1^{-1}=f_2\circ f_1^{-1}\neq (f_2\circ f_1)^{-1}
    \]
\end{itemize}
Composable $C^p$ mappings are functors in the category of open subsets between Banach spaces. Few basic facts about $C^p$ morphisms:
\begin{itemize}
    \item If $f$ is a toplinear mapping between $E$ and $F$, then $f\in C^p(E,F)$ for all $p\geq 0$.
    \item If $f$ is a bijective toplinear mapping, then it is a $C^p$ isomorphism for all $p\geq 0$.
    \item However, a bijective $C^p$ morphism need not be a $C^p$ isomorphism.
\end{itemize}

\topheader{Structure of a manifold}
It is fruitful to \emph{construct} the manifold rather than \emph{define} it. We also insist on working with open sets of Banach spaces instead coordinate functions as our primary data.\\

% We will be working in the category of $C^p$ Banach spaces (all Banach spaces are assumed to be over $\real$). Its morphisms are $C^p$ morphisms: the maps which are continuously $p$-times differentiable (but not necessarily linear). Note that if $p\geq 0$, every toplinear morphism is a $C^p$ morphism, and every toplinear isomorphism is a $C^p$ isomorphism. However, a bijective $C^p$ morphism is usually not a $C^p$ isomorphism. 

\begin{definition}[Chart]\label{def:chart}
    Let $X$ be a non-empty set. A \emph{chart on $X$ modelled on a Banach space $E$} is a tuple $(U,\varphi)$, such that $U\subseteq X$,  $\varphi(U)=\hat{U}$ is an \emph{open} subset of $E$, and $\varphi$ is a bijection onto $\hat{U}$.
\end{definition}
\begin{definition}[Compatibility]\label{def:compatibility}
    Let $(U,\varphi)$ and $(V,\psi)$ be charts on $X$ modelled on $E$, they are called $C^p$ compatible (for $p\geq 0$) if $U\cap V=\varnothing$, or both of the following hold
    \begin{itemize}
        \item $\varphi(U\cap V)$ and $\psi(U\cap V)$ are \emph{both} open subsets of $E$, and
        \item the \emph{transition map} $\psi\circ\varphi^{-1}: \varphi(U\cap V)\to \psi(U\cap V)$ is a $C^p$ isomorphism between open subsets of $E$.
    \end{itemize}
\end{definition}
\begin{definition}[Atlas]\label{def:atlas}
    Let $X$ be a non-empty set and $p\geq 0$. A \emph{$C^p$ atlas on $X$ modelled on $E$} is a pairwise $C^p$ compatible collection of charts $\{(U_\alpha,\varphi_\alpha)\}$ whose union over the domains cover $X$.
\end{definition}
We will assume hereinafter that atlases are of class $C^p$ for $p\geq 0$. Let $X$ be a non-empty set, equipped with an atlas $\{(U_\alpha,\varphi_\alpha)\}$ modelled on a space $E$. Suppose $\alpha$, and $\beta$ both index the atlas.
\begin{itemize}
    \item We write $\hat{U}_\alpha$ to refer to $\varphi_\alpha(U_\alpha)$, and
    \item $\hat{p}=\varphi_\alpha(p)$ for $p\in U_\alpha$ when it is clear which chart we are using.
    \item $U_{\alpha\beta} = U_\alpha\cap U_\beta$, and if $U_{\alpha\beta}\neq\varnothing$: the \emph{transition map from $\alpha$ to $\beta$} is defined in \cref{eq:transition-map-alpha-beta-1}.
    \begin{equation}\label{eq:transition-map-alpha-beta-1}
        \varphi_{\alpha\beta}\defined\varphi_{\beta}\vert_{U_{\alpha\beta}}\circ\qty(\varphi_{\alpha}\vert_{U_{\alpha\beta}})^{-1} : \varphi_{\alpha}(U_{\alpha\beta})\to\varphi_{\beta}(U_{\alpha\beta})
    \end{equation}
    \item We often suppress the restrictions of the two charts in the composition, and \cref{eq:transition-map-alpha-beta-1} reads
    \begin{equation}\label{eq:transition-map-alpha-beta-2}
        \varphi_{\alpha\beta} = \varphi_\beta\circ\varphi_{\alpha}^{-1} = \varphi_{\beta}\varphi_{\alpha}^{-1}
    \end{equation}
\end{itemize}

\begin{remark}[Omissions of $C^p$]
    We might refer to two charts as \emph{compatible} or \emph{smoothly compatible}, implying they are $C^p$ compatible. This comes from the perspective that, in the context of $C^p$ manifolds, any smoothness exceeding $C^p$ is deemed sufficiently smooth for our purposes. We also say $C^p$ for $C^p$ where $p\geq 0$.
\end{remark}
%
Given that compatibility is an equivalence relation on the set of all charts on $X$ that are modelled on $E$, it should not be surprising it descends into an equivalence relation among atlases. This is condensed in \cref{note:equivalence-relation-descends}.
%
\begin{note}[Descent of an equivalence relation]\label{note:equivalence-relation-descends}
    Let \( \Omega \) be a non-empty set with an associated equivalence relation \( \sim \). Suppose $A_i\subseteq \Omega$ is also a subset of the equivalence class $[A_i]$ where $i = \underline{2}$. We say the $A_1\sim A_2$ if any of the following equivalent statements hold.
    \begin{enumerate}
        \item For every $(x,y)\in A_1\times A_2$, we have $x\sim y$.
        \item There exists $x\in A_i$, where $x\sim y$ for all $y\in A_{3-i}$.
        \item $A_1\cup A_2$ is a subset of an equivalence class over $\Omega/\sim$.
        \item $A_j\subseteq [A_i]$ for $i,j = \underline{2}$.
    \end{enumerate}
    It is not hard to see this defines an equivalence relation. And $[A_i]$ represents the largest superset of $A_i$ that is contained within a single equivalence class.
\end{note}
\begin{definition}[Structure determined by an atlas]\label{def:structure-of-manifold}
    Let $\acal$ be an atlas on $X$, the maximal atlas containing $\mathcal{A}$ is called the \emph{$C^p$ structure determined by $\mathcal{A}$}. 
\end{definition}
\begin{definition}[Manifold]\label{def:manifold}
    A \emph{$C^p$ manifold modelled on $E$} is a non-empty set $X$ with a $C^p$ structure modelled on $E$. We refer to $E$ as the \emph{model space} of $X$.
\end{definition}
\begin{wts}[$E$ is a manifold]\label{prop:banach-space-is-manifold}
    The identity $\id{E}$ defines an atlas on $E$, which determines a $C^p$ structure called the \emph{standard structure of $E$} for $p\geq 0$. We call $(E,\id{E})$ the \emph{standard chart} on $E$.
\end{wts}

\begin{wts}[Topology is unique on a manifold]\label{def:topology-unique-on-manifold}
    Let $X$ be a $C^p$ manifold modelled on $E$, it induces a unique topology such that the domain for each chart in its smooth structure is open, and each chart is a homeomorphism onto its range in the subspace topology.
\end{wts}
\begin{proof}
    We offer a sketch of the proof. Fix a chart $(U,\varphi)$, it is clear that $U$ has to be in the topology of $X$, and because $\varphi: U\to \hat{U}$ is required to be a homeomorphism, we duplicate all the open sets in $\hat{U}$ by using the inverse image through $\varphi$. The collection of all such inverse images form a sub-basis, thus defines a unique topology as is well known.\\

    There is an alternate way constructing the above topology. The existence of a coarsest topology on a chart domain $U$ such that if $(V,\varphi)$ is another chart whose domain $V\cap U\neq\varnothing$, then $\varphi\vert_{U\cap V}$ is a homeomorphism onto its range. Stitching the weak topologies together, we obtain an ambient topology on $X$ \cite{Lang2012Fundamentals}.
\end{proof}

\begin{remark}[Omission of model space]\label{rmk:omission-of-model-space}
    For any of the objects we have defined in this section, that depend upon a model space or a morphism class (i.e $C^p$), we will say '$X$ is a manifold', rather than $X$ is a manifold of class $C^p$ modelled over $E$ when it is convenient to do so. If the model space $E$ is infinite (resp. finite) dimensional, we say $X$ is infinite (resp. finite) dimensional. And a reminder: $C^p$ should always be interpreted with $p\geq 0$.
\end{remark}
\begin{wts}[Open subsets of manifolds]\label{prop:open-subsets-of-manifolds}
    Let $U$ be an open subset of a manifold $X$, then $U$ is a manifold whose structure is determined by the atlas $\acal$ in \cref{eq:open-subset-atlas}.
    \begin{equation}\label{eq:open-subset-atlas}
    \acal = \bigset{(V,\varphi) \text{ in the structure of }X,\:\text{where } V\subseteq U}
    \end{equation}
\end{wts}
\begin{proof}
    The structure of $X$ includes all possible restrictions to open sets; hence  $\acal$ in \cref{eq:open-subset-atlas} is an atlas, and a unique structure by \cref{def:structure-of-manifold}.
\end{proof}
%%%%%
%%%%
%%%
%%
\topheader{Morphisms between manifolds}
%
%%
%%%
%%%%
%%%%% 
\begin{definition}[Morphisms between manifolds]\label{def:smoothness}
A mapping $f: X\to Y$ between manifolds is a \emph{morphism} (a $C^p$ morphism to be precise) if for every $p\in X$, there exist charts $(U,\varphi)\in X$ and $(V,\psi)\in Y$ such that 1) the image $f(U)$ is contained in a the chart domain $V$, and 2)
\begin{equation}\label{eq:smoothness}
    f_{U,V}\defined \psi\circ f\circ \varphi^{-1}\in C^p(\hat{U},\hat{V}) \quad\text{ in the sense of \cref{def:cp-banach-space}.}
\end{equation}
The map $f_{U,V}$ as defined in \cref{eq:smoothness} is called the \emph{coordinate representation of $f$} with respect to the charts $(U,\varphi), (V,\psi)$. 
\end{definition}
\begin{remark}[Identifying $X$ with its structure]
 If $(U,\varphi)$ is a chart in the structure of $X$, we will simply say $(U,\varphi)$ is in $X$.
\end{remark}
\begin{remark}[Identifying charts with their domains]
The scenario in \cref{eq:smoothness} occurs so often that we decide to simply write 
\begin{equation}\label{eq:suitably-chosen-charts-1}
    f_{U,V} = \psi f\varphi^{-1}
\end{equation}
to mean there exists charts $(U,\varphi)$, $(V\psi)$ in the structure of $X$, $Y$ with 
\begin{equation}\label{eq:suitably-chosen-charts-2}
    f(U)\subseteq V
\end{equation}
Consistent with the notation of putting hats on objects borrowed or pulled back from the model spaces, we write $\hat{f}=f_{U,V}$. \Cref{eq:suitably-chosen-charts-3} gives an example of this.
\begin{equation}\label{eq:suitably-chosen-charts-3}
    \hat{f}(\hat{p}) = f_{U,V}(\hat{p}) = f_{U,V}(\varphi(p))
\end{equation}
for any morphism $f\in \Mor(X,Y)$, and charts that satisfy \cref{eq:suitably-chosen-charts-2}. We refer to the map in \cref{eq:suitably-chosen-charts-3} as a \emph{coordinate representation of $f$ about $p$}, with the inference that $p\in (U,\varphi)$.
\end{remark}

% Motivation for the definition of smoothness
\Cref{def:smoothness} may leave one unsatisfied. Why do we require the image $f(U)$ be contained in another chart domain in $Y$? There are two reasons.
\begin{description}
    \item[Continuity] Suppose $f$ is a map between $E$ and $F$, and the restriction of $f$ onto a family of open subsets $U_{\alpha}\subseteq E$ is $C^p$ for $p\geq 0$. If $\{U_\alpha\}$ is an open cover for $E$, then $f$ is continuous. \Cref{prop:smoothness-implies-cont-functorality} shows this equally holds for manifolds.
    \item[Implicit assumption] The definition of smoothness between open subsets of Banach spaces (see \cref{def:cp-banach-space}) is a purely local one. And let us recall: every chart domain $U$ in a manifold $X$ corresponds to an open subset $\hat{U}\subseteq E$ in the model space, and see \cref{rmk:cp-banach-space-mapping-image-contained} as well. Hence, \textbf{the necessity that the image $f(U)$ is contained in a single chart domain of $Y$ is a relic of the original definition}. The astute reader will also see that the openness requirement of $\psi(U\cap V)$, and $\varphi(U\cap V)$ in \cref{def:compatibility} is completely natural as well, since $C^p$ morphisms are defined between open subsets of Banach spaces.
\end{description}
%
\begin{wts}[Properties of morphisms between manifolds]\label{prop:smoothness-implies-cont-functorality}
    Every $C^p$ morphism between manifolds is a continuous map, and the composition of $C^p$ morphisms is again a morphism.
\end{wts}
\begin{proof}
    The first claim is proven if we show $f$ is locally continuous. Using \Cref{eq:smoothness}, since $p$ is arbitrary, choose any neighbourhood $W$ of $f(p)$, by shrinking this neighbourhood, it suffices to assume it is a subset of the chart domain $V$. The charts on $X$ and $Y$ are homeomorphisms, and unwinding the formula shows that $f\vert_{U} = \psi^{-1}f_{U,V}\varphi$, so that
    \[
        U\cap f^{-1}(W) = (f\vert_U)^{-1}(W)\quad\text{is open in }X.
    \]
    To prove the second, let $\UL{X}[3]$ be manifolds modelled over $\UL{E}[3]$, and $f_1$, $f_2$ is smooth between $X_i$ such that $f_2\circ f_1$ makes sense. Since $f_1$ is smooth, one finds a pair of charts $(U_i,\varphi_i)\in X_i$ for $i = 1,2$ about each $p\in X_1$ such that ${(f_1)}{_{U_1,U_2}}$ is a morphism.\\

    $f_2(f_1(p))$ induces another pair of charts $(V_i,\psi_i)\in X_i$ for $i=2,3$. Since $f_2$ is smooth, it is continuous. $f_1^{-1}\circ f_2^{-1}(V_3)$ is open in $X_1$, and we can shrink all of our charts so that $f_2f_1(U_1)$ is contained in $V_3$. Finally, because $C^p$ morphisms between open subsets of Banach spaces is closed under composition, $f_{U_1\cap f_1^{-1}f_2^{-1}(V_3), V_3}$ is smooth.
\end{proof}
\begin{remark}[Morphisms between $C^k$, $C^p$ manifolds]\label{rmk:morphism-cp-ck}
    Let $X$ be a $C^k$-manifold, and $Y$ a $C^p$ manifold, where $k,p\geq 0$. A morphism between $X$ and $Y$ is a map $f: X\to Y$ such that each point $p\in X$ admits a coordinate representation 
    \begin{equation}\label{eq:morphism-cp-ck}
        f_{U,V}\in C^{\min(p,k)}(\hat{U},\hat{V})
    \end{equation}
    If $\min(p,k)\geq 1$, then we define its differential as in \cref{def:differential-of-a-morphism} by treating both $X$ and $Y$ as $C^{\min(k,p)}$ manifolds.
\end{remark}

\topheader{Tangent spaces}
\textbf{In this section, all manifolds will be of class $C^p$ for $p\geq 1$}. The next question that we will address is taking derivatives of smooth maps between manifolds. There is no reason to demand $C^p$ smoothness between maps, or even a $C^p$ category of manifolds if we cannot borrow something more other than the morphisms on open sets. \\

Suppose $U$ is an open subset of $E$ and $f: U\to Y$ is $C^p$. The derivative $Df(x)$ is a linear map $E\to F$, not from $U$ to $F$ ($U$ might not even be a vector space). This suggests the 'derivative' of a morphism $F: X\to Y$ between manifolds can in some sense be interpreted as the \emph{ordinary derivative} of its coordinate representation $DF_{U,V}(\hat{p})$, adhering to our principle of using open sets.\\

But there is a problem with this 'derivative': it gives different values for different charts. With infinitely many charts in $X$ and $Y$, this definition becomes useless. To see this, let $X$ be a manifold modelled on $E$ and $p\in X$. If $f: X\to Y$ is a morphism, and $(U_1,\varphi_1)$, $(U_2,\varphi_2)$ are charts defined about $p$ such that the representations $f_{U_1, V}$ and $f_{U_2, V}$ are morphisms. Writing $p_i = \varphi_i (p)$, $U_{12} = U_1\cap U_2$ and
\begin{equation}\label{eq:tangent-space-overlap-motivation}
    \varphi_{12}=\varphi_2\varphi_{1}^{-1}: \varphi_1(U_{12})\to \varphi_2(U_{12})
\end{equation}
(because the map in \cref{eq:tangent-space-overlap-motivation} goes from the domain $U_1$ to $U_2$), a simple computation yields \cref{eq:tangent-space-quotient-motivation}.
\begin{align}
    Df_{U_1, V}(p_1)(v) &= D(\psi f \varphi_2^{-1}\varphi_2\varphi_1^{-1})(p_1)(v) = Df_{U_2,V}(p_2)\biggl(D\varphi_{12}(p_1)(v)\biggr)\nonumber\\
    &= Df_{U_2,V}(p_2)\circ D\varphi_{12}(p_1)\cdot (v)\label{eq:tangent-space-quotient-motivation}
\end{align}
where $\cdot(v)$ denotes the evaluation at $v\in E$, and is assumed to be left associative over composition. The computation in \cref{eq:tangent-space-quotient-motivation} suggests that interpreting the derivative by pre-conjugation is dependent on the chart being used to interpret the derivative. In fact, $D\varphi_{12}(p_1)$ can be replaced with any toplinear isomorphism on $E$ (relabel $\varphi_2 = A\varphi_1$ where $A$ is any linear automorphism on $E$), so the right hand side of \cref{eq:tangent-space-quotient-motivation} can be interpreted as $Df_{U_2,V}(p_2)(w)$ where $w$ is any vector in $E$. 

\begin{definition}[Concrete tangent vector]\label{def:concrete-tangent-vector}
    Suppose $k\geq 1$, $X$ a $C^k$-manifold on $E$, and $p\in X$. If $(U,\varphi)$ is any chart containing $p$, for each $v\in E$ we call $(U,\varphi,p,v)$ a \emph{concrete tangent vector at $p$} that is \emph{interpreted} with respect to the chart $(U,\varphi)$. The disjoint union of concrete tangent vectors, as shown in \cref{eq:concrete-tangent-space}
    \begin{equation}\label{eq:concrete-tangent-space}
        T_{(U,\varphi,p)}X = \bigcup_{v\in E}\{(U,\varphi,p,v)\}\cong E,
    \end{equation}
    is called the \emph{concrete tangent space at $p$} interpreted with respect to $(U,\varphi)$; and it inherits a TVS structure from $E$.
\end{definition}

Fix a point $p$ in a manifold $X$. Suppose $(U_i,\varphi_i)$ are charts containing $p$, from \cref{eq:tangent-space-quotient-motivation} there exists a natural (toplinear) isomorphism between the concrete tangent spaces, namely 
\begin{equation}\label{eq:concrete-tangent-vector-relation}
    (U_1,\varphi_1,p,v_1)\sim (U_2,\varphi_2,p,v_2)\qqtext{iff} v_2 = D\varphi_{12}(p_1)(v_1),
\end{equation}
where $p_i = \varphi_i (p)$. The right member of \cref{eq:concrete-tangent-vector-relation}  is the derivative of a transition map --- which is a toplinear automorphism on $E$. Hence $D\varphi_{12}(p_1)$ defines a toplinear isomorphism between $T_{(U_1,\varphi_1,p)}X$ and $T_{(U_2,\varphi_2,p)}X$. With this, we define the primary object of our study.
\begin{definition}[Tangent vector]\label{def:tangent-vector}
    A \emph{tangent vector} (or an \emph{abstract} tangent vector) at $p$ is defined as an equivalence class of concrete tangent vectors at $p$, under the relation in \cref{eq:concrete-tangent-vector-relation}.
\end{definition}

\begin{definition}[Tangent space]\label{def:tangent-space}
    The \emph{tangent space} at $p$, denoted by $T_p X$ is the set of all tangent vectors at $p$. It is toplinearly isomorphic to the model space $E$.
\end{definition}

\begin{definition}[Differential of a morphism]\label{def:differential-of-a-morphism}
    Let $X$ and $Y$ be modelled on the spaces $E$ and $F$. If $f$ be a morphism between $X$ and $Y$, and fix $p\in X$. We define a linear map, called the \emph{differential of $f$ at $p$} shown in \cref{eq:differential-of-a-morphism}.
    \begin{equation}\label{eq:differential-of-a-morphism}
        df(p): T_p X\to T_{f(p)} Y
    \end{equation}
    Whose action on tangent vectors is characterized by
    \begin{itemize}
        \item if $(U,\varphi)$ and $(V,\psi)$ are any pair of charts that satisfy the morphism condition in \cref{eq:smoothness} about $p$, and suppose 
        \item $v\in T_pM$ is represented by $\qty\Big(U,\varphi,p, \hat{v})$
        \item then $df(p)(v)\in T_{f(p)}Y$ is represented by $\qty\Big(V,\psi, f(p), Df_{U,V}(\hat{p})(\hat{v}))$
    \end{itemize}
    Alternatively, the diagram shown in \cref{fig:differential-of-morphism} commutes. We also write $df_p = df(p)$.
\end{definition}
% Link to diagram for differential of a morphism
% https://q.uiver.app/#q=WzAsNCxbMiwwLCJUX3soVSxcXHZhcnBoaSxwKX1YIl0sWzAsMCwiVF9wIFgiXSxbMiwyLCJUX3soVixcXHBzaSxmKHApKX1ZIl0sWzAsMiwiVF97ZihwKX0gWSJdLFswLDIsIkRmX3tVLFZ9KFxcaGF0e3B9KSIsMV0sWzMsMl0sWzEsMF0sWzEsMywiZGYiLDFdXQ==
\begin{figure}[!h]
\centering
\begin{tikzcd}
	{T_p X} && {T_{(U,\varphi,p)}X} \\
	\\
	{T_{f(p)} Y} && {T_{(V,\psi,f(p))}Y}
	\arrow["{Df_{U,V}(\hat{p})}"{description}, from=1-3, to=3-3]
	\arrow[from=3-1, to=3-3]
	\arrow[from=1-1, to=1-3]
	\arrow["df(p)"{description}, from=1-1, to=3-1]
\end{tikzcd}
\caption{Differential of a morphism}
\label{fig:differential-of-morphism}
\end{figure}


%
%
% \begin{note}[Interpretation using co-product]
%     There is another way of interpreting the construction above. Each concrete tangent space is toplinearly isomorphic to $E$, the projection maps onto $\{p\}$ and $E$ can be glued together using the universality of the coproduct, where $\{p\}$ is interpreted as a $0$-dimensional vector space. The construction of $T_pM$ follows by invoking the property of the quotients.
% \end{note}
%



% Recap of this section, the tangent space at a point is defined to be such that when the chart in the codomain is fixed, the coordinate interpretation of the derivative is independent of the chart used. This is done by gluing together the inputs. Now, we let the chart in the codomain to vary, and we also see that it is independent of the interpretation used.
% Let $F$ be a morphism between manifolds $X$ and $Y$. Because the equivalence relation in eq3 is compatible with linear operations. ie: if we relabel (U_1,v_1) = (U_1,\varphi_1, p, v_1), similarly for U_2.
% (U_1,v_1)\sim (U_2,v_2)\qqtext{and}(U_1,w_1)\sim(U_2,w_2), then their difference and their dilations will be \sim as well.
% So, DF_{, V} is well defined, and is the unique linear map by the property of the quotients.
% on the side of the codomain, we just have to compose DF_{, V} with the map that sends each concrete tangent vector to its abstract tangent vector. This map is linear.

\topheader{Velocities}
In the previous section, we motivated the definition of $T_pX$ using the computation of the derivative of a morphism from $X$. Dually, the tangent space allows us compute the derivatives of morphisms into $X$ in a coordinate independent manner.\\

\begin{definition}[Curve]
Let $J_\varepsilon = (-\varepsilon, +\varepsilon)$ be an open interval in $\real$ containing the origin. \Cref{prop:open-subsets-of-manifolds} tells us $J_\varepsilon$ is a manifold. A morphism $\gamma: J_\varepsilon\to X$ is called a \emph{curve in $X$}, and $\gamma(0)$ is called the \emph{starting point of $\gamma$}.
\end{definition}

\begin{remark}[Omission of chart in concrete representation]\label{rmk:omission-of-chart-in-concrete-rep}
    If $p$ is a point on a manifold $X$, and $v\in T_p X$ is represented by $(U,\varphi,p,\hat{v})$, we write
    \begin{equation}\label{eq:concrete-tangent-vector-shorthand}
        (U,\hat{v}) = (\hat{p},\hat{v}) = \hat{v} = (U,\varphi,p,\hat{v})    
    \end{equation}
\end{remark}
\begin{remark}[Standard representation of tangent vectors]\label{rmk:standard-concrete-representation}
    If $X$ is an open subset of $E$, and $p\in X$, we identify a tangent vector $v\in T_p X$ by its \emph{standard representation}. Instead of using a $\hat{v}$, we use $\cl{v}$.
    \begin{equation}
        (X,\id{X},p,\cl{v}) = (X,\cl{v}) = (X,\hat{v}) \quad\text{is a representation of } v\in T_p X
    \end{equation}
\end{remark}

\begin{definition}[Velocity of a curve]\label{def:velocity-of-a-curve}
    Let $\gamma$ be a curve in $X$ and $t\in J_\varepsilon$. We denote the \emph{velocity} of a curve $\gamma$ at $t=t_0$ by $\gamma'(t_0)$; which is defined in \cref{eq:velocity-of-a-curve}.
    \begin{equation}\label{eq:velocity-of-a-curve}
        \gamma'(t_0)=\qty[D\gamma_{J_\varepsilon,V}(t_0)(\cl{1})]
    \end{equation}
    where $(J_{\varepsilon},\id{J_\varepsilon},t_0,\cl{1})$ is a concrete tangent vector within $T_{t_0} J_\varepsilon$.
\end{definition}
\Cref{eq:velocity-of-a-curve} might seem arbitrary at first, but we must emphasize that this is the most natural interpretation of a velocity, encodes much of the geometric information of a tangent vector. We will revisit this topic when we discuss exterior differentiation.
\begin{wts}[Tangent vectors are velocities]\label{prop:tangent-vectors-are-velocities}
    Let $p$ be a point on a manifold $X$. For every tangent vector $v\in T_p X$, there exists a curve starting at $p$ whose velocity is $v$.
\end{wts}
\begin{proof}
    Find a chart $(U)$ in $X$ where $\hat{p}=0$. Such a chart exists, because translations and dilations are $C^p$ isomorphisms. If the tangent vector $v$ has interpretation $\hat{v}$ in $U$, there exists $\varepsilon>0$ so small that the range of $\hat{\gamma}$, as defined \cref{eq:velocity-curve-gamma-coord-rep}, lies in $\hat{U}$
    \begin{equation}\label{eq:velocity-curve-gamma-coord-rep}
        \hat{\gamma}: J_\varepsilon\to \hat{U}\quad \gamma(t) = \int_0^t \hat{v}dt
    \end{equation}
    $\hat{\gamma}$ is a curve in $\hat{U}$ starting at $\hat{p}$ with velocity $\hat{v}$. Defining $\gamma$ as the composition of $\hat{\gamma}$ with the chart inverse finishes the proof.
\end{proof}


%
%
%
% \fchapter{2: Submanifolds}
% Let X be a topological space, a subset $S\subseteq X$ is locally closed if every point $p\in S$ admits a neighbourhood $U\osub X$ such that $U\cap S$ is closed in $U$.

%wts: all locally closed sets are the intersection of a closed set and an open set.

% Let U_\alpha cover our locally closed S, such that U_\alpha\cap S is a closed subset of $U_\alpha$, so that $U_\alpha\setminus S$ is open in $U_\alpha$. Since $U_\alpha$ is open (Munkres Lemma 16.2) implies $U_\alpha\setminus S$ is open in $X$.

% Take the union over all such $U_\alpha\setminus S$, since $U_\alpha$ covers $S$. Denote $\bigcup U_\alpha = U$. And $U\setminus S$ is open in $X$. Its complement relative to $X$ is closed. And

% X\setminus (U\setminus S) = U^c + S is closed in $X$. 
% Take the intersection with $U$, which is an open subset of $X$,
% U\cap [X\setminus (U\setminus S)] = U\cap (U^c + S) = U\cap S = S
% Therefore $S$ is the intersection between an open set and a closed set.

% Embedded submanifolds are precisely the subsets of a manifold $X$ where we can pull existing charts (if we can 'drop' some of the coordinates) from the smooth structure of $M$. Since these charts cover $S$, it defines an atlas: and the uniqueness of the structure (which includes the topology) follows.

% Lang: Fix a manifold $X$ (of class $C^k$), and a subset $S\subseteq X$. For every $p\in S$, we can find a chart $(U,\varphi)$ in the structure of $X$ containing the point $p$, such that

% U is isomorphic, through \varphi to a product manifold $V_1\times V_2$. Where $V_i$ are open subsets of Banach space $E_i$. And that

% \varphi(U\cap S) = V_1\times {a_2}, where $a_2$ is some point in $V_2$. So $U\cap S$ belongs precisely to some fiber. The isomorphism above should be interpreted in the $C^k$ manifold sense. 

%Because open subsets of Banach spaces are submanifolds. (have we proven this yet?)

% Lee interpretation: 
% Theorem 5.16: every embedded submanifold is locally a levle set. A subset $S\subseteq X$ is an embedded submanifold if and only fi for every $p\in S$ there exists a chart in the smooth structure on $$ such tht $U\cap S$ is precisely a level set of a morphism $f_{U\cap S}$ with codomain $\real^{n-k}$. In this case we say $S$ is an embedded submanifold of dimension $k$.

% The dimension of the codomain of the local defining function of the embedded submanifold is the codimension of the embedded submanifold


\topheader{Splitting}
Recall: if $W$ is a vector space and $W_1$, $W_2$ are linear subspaces of $V$. $W_2$ is the vector space complement of $W_1$ (resp. with the indices reversed) if 
\[W_1 + W_2 = W,\qqtext{and} W_1\cap W_2 = 0\]
We sometimes refer to the vector space complement of $W_1$ as its \emph{linear complement}.
\begin{definition}[Splitting in $E$]\label{def:splitting-subspace}
A linear subspace $E_1$ splits in $E$ if both $E_1$ and its vector space complement $E_2$ are closed, and the addition map $\theta: E_1\times E_2\to E$ given by 
\[
    \theta(x,y)= x + y\quad\text{is a toplinear isomorphism.}
\]
\end{definition}
%
%
% If $\lambda\in L(E,F)$ is injective, we would like to describe the situation where we can think $E$ being toplinearly isomorphic to its range, similar to the matrix canonical form $\begin{bmatrix}I_{k} & 0_{k\times (n-k)} \end{bmatrix}$. This requires the range of $\lambda$ to be a toplinear subspace, and we obtain the following.
%
\begin{definition}[Splitting in $L(E,F)$]\label{def:splitting-clm}
A continuous, injective linear map $\lambda\in L(E,F)$ \emph{splits} iff its range splits in $F$. 
\end{definition}
Every finite dimensional or finite codimensional linear subspace of $E$ splits. And if $E$ itself is finite dimensional, then every linear subspace of $E$ splits. An alternative definition of \cref{def:splitting-clm}  is as follows: an map $\lambda\in L(E,F)$ splits iff there exists a toplinear isomorphism $\theta: F\to F_1\times F_2$ such that $\lambda$ composed with $\alpha$ induces a toplinear isomorphism from $E$ onto $F_1\times 0$ --- which we identify with $F_1$. \\

If $E$ and $F$ are finite dimensional (so $E = \realn$ and $F = \realm$ respectively), \cref{def:splitting-clm} refers to the familiar matrix canonical form in \cref{eq:matrix-canonical-forms}, and \cref{def:immersion,def:submersion} can be seen as infinite-dimensional analogues of \cref{eq:matrix-canonical-forms}.
    \begin{align}
    A_{\mathrm{injective}} = \begin{bmatrix}
        \id{m\times m} \\
        0_{n-m\times m} 
    \end{bmatrix}
    & & 
    A_{\mathrm{surjective}} = 
    \begin{bmatrix}
        \id{n\times n} & 0_{n\times m-n}
    \end{bmatrix}\label{eq:matrix-canonical-forms}
    \end{align}
%
%
% Should I include the fact that X and Y are should still be considered as manifolds?
% No, what about the point p?
%
%
%
\begin{multicols}{2}
\begin{definition}[Immersion]\label{def:immersion}
    A morphism $f\in\Mor(X,Y)$ is an \emph{immersion at $p$} if there exists a coordinate representation about $f_{U,V}$ such that 
    \begin{equation}\label{eq:immersion-at-point}
        Df_{U,V}(\hat{p})\quad\parbox{7.5em}{is injective and splits.}
    \end{equation}
    The morphism $f$ is called an \emph{immersion} if \cref{eq:immersion-at-point} holds at every $p$.
\end{definition}
%
%
\begin{definition}[Submersion]\label{def:submersion}
    A morphism $f\in\Mor(X,Y)$ is a \emph{submersion at $p$} if there exists a coordinate representation about $f_{U,V}$ such that 
    \begin{equation}\label{eq:submersion-at-point}
        Df_{U,V}(\hat{p})\quad\parbox{8em}{is surjective and its kernel splits.}
    \end{equation}
    The morphism $f$ is called a \emph{submersion} if \cref{eq:submersion-at-point} holds at every $p$.
\end{definition}
\end{multicols}
%
%
%
%
%
%
\begin{definition}[Embedding]\label{def:embedding}
    A morphism $f\in\Mor(X,Y)$ is an \emph{embedding} if it is an immersion and a homeomorphism onto its range.
\end{definition}

\begin{definition}[Toplinear subspace]\label{def:toplinear-subspace}
    Let $E$ be a Banach space, a \emph{toplinear subspace of $E$} is a closed linear subspace $E_1$ which splits in $E$.
\end{definition}
%%%

%%%
%
% End of splitting Chapter
%
\topheader{Submanifolds}
Before we state the definition of a submanifold, it is important to recapitulate the construction of a manifold $X$.
\begin{enumerate}
    \item Given a non-empty set $X$ and an atlas modelled on a space $E$.
    \item The purpose of each chart in the atlas is to borrow open subsets $\hat{U}\osub E$. If we single out a single chart, \textbf{the construction is entirely topological}. It is of little importance \emph{how} the individual chart domains $U$ are mapped onto $\hat{U}$,
    \item Each chart is in \textbf{bijection with its range}, which is an open subset of $E$, and
    \item the transition maps $\varphi_{\alpha\beta} = \varphi_\beta\varphi_\alpha^{-1}$ are \textbf{morphisms between open subsets of $E$}.
\end{enumerate}
%
%
%
If $(U,\varphi)\in X$ is a chart whose domain intersects $S$, the question then becomes: Is it possible to modify $(U,\varphi)$ so that it becomes a chart modelled on $E_1$? If we restrict $\varphi$ onto $U\cap S$, its range is still an open subset of $E$. We can assume $\varphi(U\cap S)\subseteq E$ is constant on the linear complement of $E_1$, that way $\varphi\vert_{U\cap S}$ will be a bijection.\\

The range of the restricted chart is still a subset of $E$, and not $E_1$. An easy fix to this would be to require $E_1$ \textbf{to split in $E$} (and shrinking $U$ using a basis argument). Let $\theta$ be a toplinear isomorphism between $E$ and $E_1\times E_2$, and we obtain \cref{eq:motivation-submanifold-modified}.
\begin{equation}\label{eq:motivation-submanifold-modified}
    \theta\varphi(S\cap U) = \hat{U}_1\times a_2\qqtext{where} \hat{U}_1\osub E_1 \text{ and }a_2\in E_2.
\end{equation}
Identifying $\hat{U}$ with $\theta(\hat{U})$, and requiring $U_1\times a_2$ to be in $\theta(\hat{U})$, we arrive at the following definition.
\begin{definition}[Submanifold]
    Let $X$ be a manifold, and $S$ a subset of $X$. We call $S$ a \emph{submanifold} of $X$ if 
    \begin{enumerate}
        \item there exist split subspaces $E_1$, $E_2$ of $E$,
        \item for every $p\in S$ is contained in $(U,\varphi)\in X$ --- a chart which also splits:
            \begin{equation}\label{eq:submanifold-slice-chart-splits}
            \varphi: U\to \hat{U}\cong \hat{U}_1\times \hat{U}_2,\qqtext{where} \hat{U}_i\osub E_i\qqtext{for} i=\underline{2},
            \end{equation}
        \item and for a such chart, there exists $a_2\in \hat{U}_2$, that makes $U\cap S$ behave like a level set:
            \begin{equation}\label{eq:submanifold-slice-chart-level-set}
            \varphi(U\cap S) = \hat{U}_1\times a_2.
            \end{equation}
    \end{enumerate}
\end{definition}
\begin{definition}[Slice chart]
    We call a chart satisfying \cref{eq:submanifold-slice-chart-splits,eq:submanifold-slice-chart-level-set} a \emph{slice chart} of $S$; and to simplify what follows, we write $\varphi^i = \operatorname{proj}_i\varphi$ for $i = \underline{2}$ for any slice chart $(U)$.
\end{definition} 
Given that $\operatorname{proj}_i$ is a morphism between open subsets of Banach spaces, $\varphi^i$ is again a morphism. In particular, $\varphi^1$ is a bijection from $U^s=U\cap S$ onto $\hat{U}_1$; the latter being an open subset of $E_1$. \\

To show $S$ is indeed a manifold it remains to show the collection of charts in \cref{eq:submanifold-induced-atlas} forms a $C^p$ atlas modelled $E_1$, which we will prove in \Cref{prop:structure-of-submanifold}
\begin{equation}\label{eq:submanifold-induced-atlas}
    \acal = \bigset{(U^s,\varphi^s) = (U^s, \varphi^1),\:\: (U,\varphi)\text{ is a slice chart of }S}.
\end{equation}
\begin{wts}[Structure of a submanifold]\label{prop:structure-of-submanifold}
    If $S$ is a submanifold of $X$, \cref{eq:submanifold-induced-atlas} defines a $C^p$ atlas over the space $E_1$. The manifold $S$ has a topology that coincides with the subspace topology. Furthermore, the inclusion map $\iota_S: S\to X$ is a morphism and an embedding.
\end{wts}
\begin{proof}
    Each of the charts in \cref{eq:submanifold-induced-atlas} is in bijection with an open subset of $E_1$. Let $(U^s_{\alpha}, \varphi^s_\alpha)$ and $(U^s_{\beta}, \varphi^s_\beta)$ be overlapping charts in $\acal$. Using $\theta$ as our toplinear isomorphism from $E$ onto $E_1\times E_2$ as usual. 
    \begin{itemize}
        \item By \cref{eq:submanifold-slice-chart-splits}, $(U^s_\alpha,\varphi^s_\alpha)$ is induced by a chart $(U_\alpha,\varphi_\alpha)\in X$,
        \[
            \varphi_\alpha: U_\alpha\to \hat{U}_{\alpha}\osub E\qqtext{which splits into }\theta(\hat{U}_\alpha) = \hat{U}_{\alpha}^s\times \hat{U}_{2,\alpha}
        \]
        such that $\hat{U}_{\alpha}^s\osub E_1$ and $\hat{U}_{2,\alpha}\osub E_2$. Similarly for $\beta$ as well.
        \item There exists elements $a_2\in \hat{U}_{2,\alpha}$, (resp. $b_2\in \hat{U}_{2,\beta}$) where
        \[
            \theta\varphi_{\alpha}(U^s_\alpha) =\hat{U}^s_\alpha\times a_2\quad\text{resp. }\beta.
        \]    
    \end{itemize}
\begin{note}
Let us define $U^s_{\alpha\beta} = U^s_{\alpha}\cap U^s_{\beta}$, we will show \cref{lem:submanifold-slice-chart-image-is-open}.
\begin{lemma}\label{lem:submanifold-slice-chart-image-is-open}
    Both $\varphi_{\alpha}^s(U^s_{\alpha\beta})$ and $\varphi_{\beta}^s(U^s_{\alpha\beta})$ are open subsets of $E_1$.
\end{lemma}
\begin{proof}[Proof of \cref{lem:submanifold-slice-chart-image-is-open}]
    We can factor $U^s_{\alpha\beta} = (U^s\cap U_\alpha)\cap U_{\alpha\beta}$, and because $\varphi_\alpha$ is a bijection, we have $\varphi_\alpha^s(U^s_{\alpha\beta}) = \proj_1\theta\qty\Big(\varphi_\alpha(U^s\cap U_{\alpha})\cap \varphi_\alpha(U_{\alpha\beta}))$.\\
    
     $\theta$ and $\proj_1$ are both open maps, and because $W\defined \varphi_{\alpha}(U_{\alpha\beta})$ is open in $E$: $\theta(\varphi_\alpha(U^s\cap U_\alpha)\cap W)$ splits into a subset of $\hat{U}^s_\alpha\times a_2$, 
    \[
        \proj_1\theta(\varphi_{\alpha}(U^s\cap U_\alpha)\cap W) = \proj_1(\text{Open subset of }E_1 \times a_2)
    \]
    which is open in $E_1$.
\end{proof}
The diagram in \cref{fig:submanifold-chart-overlap} provides a summary. 
\end{note}
% Link to diagram of slice charts in quvier
% https://q.uiver.app/#q=WzAsOSxbMCwwLCJVX3tcXGFscGhhXFxiZXRhfSJdLFsyLDAsIlxcYWxwaGEoVV97XFxhbHBoYVxcYmV0YX0pIl0sWzQsMCwiXFxhbHBoYShVX3tcXGFscGhhXFxiZXRhfSlfMVxcdGltZXMgXFxhbHBoYShVX3tcXGFscGhhXFxiZXRhfSlfMiJdLFsyLDIsIlxcYmV0YShVX3tcXGFscGhhXFxiZXRhfSkiXSxbNiw2XSxbNCwyLCJcXGJldGEoVV97XFxhbHBoYVxcYmV0YX0pXzFcXHRpbWVzIFxcYmV0YShVX3tcXGFscGhhXFxiZXRhfSlfMiJdLFswLDIsIlVfe1xcYWxwaGFcXGJldGF9Il0sWzYsMCwiXFxhbHBoYShVX3tcXGFscGhhXFxiZXRhfSlfMSJdLFs2LDIsIlxcYmV0YShVX3tcXGFscGhhXFxiZXRhfSlfMSJdLFswLDEsIlxcYWxwaGEiLDFdLFsxLDIsIlxcdGhldGEiLDFdLFsxLDMsIlxcdmFycGhpX3tcXGFscGhhXFxiZXRhfSIsMV0sWzMsNSwiXFx0aGV0YSIsMV0sWzYsMywiXFxiZXRhIiwxXSxbMiw1LCJcXHRoZXRhXFx2YXJwaGlfe1xcYWxwaGFcXGJldGF9XFx0aGV0YV57LTF9IiwxXSxbMiw3LCJcXHByb2pfMSIsMV0sWzUsOCwiXFxwcm9qXzEiLDFdXQ==
\begin{figure}[!h]
\centering
\begin{tikzcd}
    {U^s_{\alpha\beta}} && {\varphi_\alpha(U^s_{\alpha\beta})} && {\varphi_\alpha(U^s_{\alpha\beta})_1\times a_2} && {\varphi^s_\alpha(U_{\alpha\beta}^s)} \\
    \\
    {U^s_{\alpha\beta}} && {\varphi_\beta(U^s_{\alpha\beta})} && {\varphi_\beta(U^s_{\alpha\beta})_1\times b_2} && {\varphi^s_\beta(U_{\alpha\beta}^s)}
    \arrow["\varphi_\alpha"{description}, from=1-1, to=1-3]
    \arrow["\theta"{description}, from=1-3, to=1-5]
    \arrow["{\varphi_{\alpha\beta}}"{description}, from=1-3, to=3-3]
    \arrow["\theta"{description}, from=3-3, to=3-5]
    \arrow["\varphi_\beta"{description}, from=3-1, to=3-3]
    \arrow["{\theta\varphi_{\alpha\beta}\theta^{-1}}"{description}, from=1-5, to=3-5]
    \arrow["{\proj_1}"{description}, from=1-5, to=1-7]
    \arrow["{\proj_1}"{description}, from=3-5, to=3-7]
\end{tikzcd}
\caption{Overlap of slice charts}
\label{fig:submanifold-chart-overlap}
\end{figure}
    Identifying $a_2$ (resp. $b_2$) with the constant function $(p\mapsto a_2)$ for $p\in U_{\alpha}^s$, we get \cref{eq:submanifold-chart-recovery}.
    \begin{equation}\label{eq:submanifold-chart-recovery}
    \varphi^s_{\alpha}\times a_2 =\theta\circ \varphi_{\alpha}\quad\text{resp. }\beta
    \end{equation}
    Suppressing the restrictions onto domains, the transition map is given by the composition of maps in \cref{eq:submanifold-transition-map-1}. 
    \begin{equation}\label{eq:submanifold-transition-map-1}
    \varphi^s_{\beta}\circ (\varphi^s_{\alpha})^{-1} = \operatorname{proj}_{1}\theta\varphi_{\beta}\varphi_{\alpha}^{-1}\theta^{-1}\proj_1^{-1}: \varphi_\alpha^s(U_{\alpha\beta}^s)\to\varphi_\beta^s(U_{\alpha\beta}^s)
    \end{equation}
    which is clearly a bijection. It suffices to show \cref{eq:submanifold-transition-map-1} is a morphism between open subsets of $E_1$. Let $a_2: \varphi_\alpha^s(U^s_{\alpha\beta})\to \hat{U}_{2,\alpha}$, which is the constant function $a_2$ and hence a morphism.\\

    The product $(\id{\varphi^s_\alpha(U^s_{\alpha\beta})}\times a_2)=\proj_1^{-1}$ is a morphism into $\varphi^s_\alpha(U^s_{\alpha\beta})\times \hat{U}_{2,\alpha}$. The inverse of $\theta$ is an open morphism, and the terms $\varphi_\beta\varphi_\alpha^{-1}$ combine into the transition map $\varphi_{\alpha\beta}$ in $X$ (up to a restriction on an open set). \Cref{eq:submanifold-transition-map-1} then reads
    \begin{equation}\label{eq:submanifold-transition-map-2}
        \varphi_\beta^s\circ(\varphi^s_\alpha)^{-1}=\proj_1\theta\varphi_{\alpha\beta}\theta^{-1}(\id{\varphi^s_\alpha(U^s_{\alpha\beta})}\times a_2)
    \end{equation}
    which is a morphism between open subsets. Reversing the roles of $\alpha$, $\beta$ shows that \cref{eq:submanifold-transition-map-1} is an isomorphism. Therefore the collection of charts in \cref{eq:submanifold-induced-atlas} forms an atlas of $S$.\\

    Let us use $\iota_{S}: S\to X$ to represent the inclusion map and consider a point $p\in S$. It is always possible to identify a slice chart $(U,\varphi)$ within $X$ that contains $p =\iota_S(p)$ in its domain. By definition of the atlas on $S$, this induces a truncated chart $(U^s,\varphi^s)$. \\
    
    Observing that $\iota_S(U^s) = \iota_S(U\cap S)$ lies within $(U,\varphi)$, the morphism criteria in \cref{eq:smoothness} is satisfied. Computing the coordinate representation of $\iota_S$, we obtain \cref{eq:submanifold-inclusion-map-coordinate-representation}.
    \begin{equation}\label{eq:submanifold-inclusion-map-coordinate-representation}
        (\iota_S)_{U^s,U} = \varphi\iota_S(\varphi^s)^{-1} = \id{\hat{U}_1}\times a_2
    \end{equation}
    \Cref{eq:submanifold-inclusion-map-coordinate-representation} shows that the coordinate representation of $\iota_S$ is a local isomorphism. Since the inclusion map is a bijection and continuous, and the coordinate representation of $\iota_S^{-1}$ is simply the inverse \cref{eq:submanifold-inclusion-map-coordinate-representation}; and $\iota_S^{-1}$ is a morphism and therefore continuous. The manifold topology of $S$ coincides with its subspace topology.\\

    At last, the inclusion map $\iota_S$ has coordinate representation \cref{eq:submanifold-inclusion-map-coordinate-representation}. Computing its ordinary derivative we obtain \cref{eq:derivative-of-inclusion-map-in-slice-coordinates}.
    \begin{equation}\label{eq:derivative-of-inclusion-map-in-slice-coordinates}
        D(\iota_S)_{U^s,U}(\hat{p}): T_{(U^s,\varphi^s,p)}\longrightarrow T_{(U,\varphi,p)}\qqtext{and} D(\iota_S)_{U^s,U}(\hat{p}) = \id{E_1}\times 0
    \end{equation}
    %
    which is a toplinear morphism between concrete tangent spaces and has a simple representation of 'adding zeroes' (see \cref{def:splitting-clm}) at the end of a vector $\hat{v}\in E_1$ --- which is to say: \textbf{the differential of $\iota_S$ is injective and splits in $E$}. Therefore $\iota_S$ is an embedding.
\end{proof}
%
%
\begin{remark}[Pairs of slice charts]\label{rmk:pairs-of-slice-charts}
    \Cref{prop:structure-of-submanifold} shows every point $p\in S$ is in the domain of a slice chart in $S$, and the domain of the chart in $X$ that induces the slice chart --- whose inclusion map satisfies \cref{eq:submanifold-inclusion-map-coordinate-representation,eq:derivative-of-inclusion-map-in-slice-coordinates}. If $p$ is a point on a submanifold $S$, we refer to a \emph{pair of slice charts} containing $p$ as the pair $(U^s,\varphi^1)$ and $(U,\varphi)$ in the structure of $S$ and $X$. 
\end{remark}
%
%
%
%
\begin{definition}[Exterior tangent space of $S$]
    The \emph{exterior tangent space} of a point $p\in S$ is the image of $T_p S$ under $d\iota_S(p)$,
    \begin{equation}\label{eq:exterior-tangent-space}
        T_p^{\mathrm{ext}}S = d\iota_S(p)(T_p S),
    \end{equation}
    which is a toplinear subspace of $T_p X$. 
\end{definition}

% The differential of the inclusion map $\iota_S: S\to X$ allows us to characterize $T_pS$ up to an isomorphism. 
% First, we need a few definitions.
% We now define the notion of the \emph{exterior tangent space of $S$}
% The representation of a tangent space in a chart, 

% \begin{definition}[Concrete tangent space]
%     Let $p$ be a point on a manifold $X$. The \emph{concrete tangent space} of $p$, with respect to a chart $(U,\varphi)$ is \cref{eq:concrete-tangent-space-eq}
% \end{definition}

% Functoral properties of the differential
% Tangent space functor, maps a pointed manifold to a tangent space, and 
% the action on the morphisms on pointed manifold, 'lifts' it to be a differential.

% Fiber Bundle: notebook page 41, 42
%\topheader{Properties of Differentials}
% 
\topheader{Notes and References}
\begin{remark}[Not necessarily Hausdorff]\label{rmk:not-necessarily-hausdorff}
    The topology generated by \cref{def:topology-unique-on-manifold} is not necessarily Hausdorff, nor second countable. So a manifold $X$ may not admit partitions of unity, but for our current purposes we will work with this general definition. Because of the uniqueness of the topology, we sometimes refer to the topology as being part of the \emph{structure} of the manifold. \\
    
    Lee \cite[Lemma 1.35]{Lee2013Introduction} requires the chart domains separate points, and this leads to a Hausdorff topology. For a discussion on inductive systems and final topologies, see \cite[pp. 116]{Conway_2019}.
\end{remark}

\clearpage

%
% End of Manifold Chapter
%
%
\fchapter{2: Vector Bundles}
\topheader{Vector Bundles}
% We want to make the idea of a map from a manifold to its tangent space rigorous, and to define what it means for such a map to be a morphism. 
%
% Let $X$ be a manifold modelled on a space $E$, and fix another Banach space $F$. If for every point $p\in X$, the space $W_p$ is toplinearly isomorphic to $F$, how can we glue together these Banach spaces to produce a $C^p$ manifold? One way to proceed would be to take the coproduct $W = \coprod_{p\in X}W_p$. This gives us a canonical projection $\pi: W\to X$.\\
% Recallong our construction procedure of the manifold, we want to cover the space $W$ with open subsets of Banach spaces. \\
% Restart
Let $X$ be a class $C^p$ manifold modelled on a space $E$, and $F$ another Banach space. Our goal in this section is to construct the vector bundle of a manifold, which has the following desirable properties.
\begin{itemize}
    \item The vector bundle $W$ embeds $X$ into itself as a submanifold.
    \item At each point $p\in X$, we attach a $F$ space structure exclusive to each $p$ akin to the tangent space $T_p X$.
    \item $W$ is locally isomorphic to the product space $U\times F$, where $U\osub X$, and
    \item a subset of the morphisms $A: X\to W$ locally resemble morphisms $U\to U\times F$.
\end{itemize}
\begin{definition}[Coproduct of fibers]\label{def:coproduct-of-fibers}
Suppose for each $p$, the set $W_p$ is toplinearly isomorphic to $F$ at for each $p$ (which implies $W_p$ is a TVS), then we call $W_p$ an $F$-\emph{fiber} at $p$. The set-theoretic coproduct of all such $W_p$ is called a \emph{coproduct of $F$-fibers modelled over $X$}, where
\begin{equation}\label{eq:vector-bundle-coproduct}
    W = \coprod_{p\in X}W_p\qqtext{comes with} \pi: W\to X,\quad \pi^{-1}(p) = W_p;
\end{equation}
with $\pi$ being a surjection onto $X$ called the \emph{canonical projection} of $W$.
\end{definition}
It turns out the natural way of making $W$ a manifold would be to steal open sets from \emph{both} $E$ and $F$ --- in this case, sets of the form $\hat{U}\times F$. We sometimes write $\wig{U}$ instead of $\pi^{-1}(U)$ for brevity, and $\wig{p}$ in place of $\pi^{-1}(p)$. The next few definitions should feel familiar.
%
% LOCAL TRIVIALISATIONS
%
\begin{definition}[Local trivialisation]\label{def:local-trivialisation}
    Let $W$ be as in \cref{eq:vector-bundle-coproduct}. A \emph{local trivialisation} of $W$ is a tuple $(\wig{U}, \Phi)$, such that the diagram in \cref{fig:local-trivialisation} commutes, and
    \begin{itemize}
        \item $U\subseteq X$ is open in $X$, and for each $p\in U$,
        \item $\Phi\vert_{\wig{p}}$ is in bijection with $W_p = F$.
    \end{itemize}
\end{definition}
%
% COMPATIBILITY CRITERION
%
\begin{definition}[Compatibility between trivialisations]\label{def:compatibility-local-trivialisations}
    Let $(\wig{U},\Phi)$ and $(\wig{V},\Psi)$ be local trivialisations of $W$, they are called $C^k$-compatible if $U\cap V=\varnothing$, or both of the following hold:
    \begin{itemize}
        \item for each $p\in U\cap V$ --- the restriction of $\Psi\circ\Phi^{-1}$ onto the fiber of $p$ --- $(\Psi\circ\Phi^{-1})\vert_{\wig{p}}$ is a toplinear isomorphism, and
        \item the map $\theta: U\cap V\to L(F,F)$ as defined by \cref{def:vb-transition-function}, is a $C^k$ morphism into the Banach space $L(F,F)$.
        \begin{equation}\label{def:vb-transition-function}
            \theta(p) = (\Psi\circ\Phi^{-1})\vert_{\wig{p}}
        \end{equation}
        (equivalently, we can require $\theta$ be a $C^k$ morphism into the open submanifold $\Laut(F)$).
    \end{itemize}
    Note: we assume that $0\leq k\leq p$.
\end{definition}

%
% TRIVIALISATION COVERING
%
\begin{definition}[Trivialisation covering]\label{def:trivialisation-covering}
    Let $W$ be a coproduct of $F$-fibers over $X$. A \emph{$C^k$ trivialisation covering of $W$} is a collection of pairwise $C^k$-compatible local trivialisations $\{(\wig{U}_{\alpha},\Phi_{\alpha})\}$ where $\{U_\alpha\}$ is an open cover of $X$.
\end{definition}
%
% VECTOR BUNDLE
%
\begin{definition}[Vector bundle]\label{def:vector-bundle}
    Let $X$ be a $C^p$ manifold over $E$, and let $F$ be a Banach space. An \emph{$F$-vector bundle of rank $k$ over $X$} is a coproduct of $F$-fibers modelled over $X$ equipped with a \textbf{maximal $C^k$ trivialisation covering}.
\end{definition}
\begin{remark}[Maximality of trivialisation covering]
    One can easily verify the compatibility condition defines an equivalence relation, thus any $C^k$- trivialisation covering \emph{determines} a maximal one.
\end{remark}
\begin{remark}[Omissions for vector bundles]
    We say $W$ is a \emph{bundle over $X$} when it is unambiguous to do so.
\end{remark}
% \begin{remark}[k vs. p]
%     A vector bundle $W$ over $X$ can be of a different class than $X$, a morphism between $C^k$ and $C^p$ manifolds are precisely the maps whose coordinate representation about every point is $C^{\min(p,k)}$; see \cref{rmk:morphism-cp-ck} for details.
% \end{remark} 
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXHdpZ3tVfSJdLFswLDMsIlUiXSxbMywwLCJVXFx0aW1lcyBGIl0sWzAsMSwiXFxwaSIsMl0sWzAsMiwiXFxQaGkiXSxbMiwxLCJcXHByb2pfVSJdXQ==
\begin{figure}[!h]
\centering
\begin{tikzcd}
{\wig{U}} &&& {U\times F} \\
\\
\\
U
\arrow["\pi"{description}, from=1-1, to=4-1]
\arrow["\Phi"{description}, from=1-1, to=1-4]
\arrow["{\proj_1}"{description}, from=1-4, to=4-1]\end{tikzcd}
\caption{Local Trivialisation}
\label{fig:local-trivialisation}
\end{figure}
%%
%%
%%
% We call the map $\theta$ in \cref{def:vb-transition-function} the \emph{transition function}.
The above definitions calls for some commentary, our end goal is to make an arbitrary rank $C^k$ vector bundle $W$ a $C^k$ manifold. Open sets will still be our primary topological data. To ensure that $W$ is as similar to $X$ as possible, the eventual manifold structure we will put on $W$ will \textbf{embed the structure of $X$ into $W$}. We are repeating (essentially) the same argument as in the submanifold case but with the roles of $X$ and the submanifold $S$ reversed.\\

Suppose we have a structure on $W$, then $X=\bigcup_{p\in X}\{p\}\times 0$ is a submanifold of the $W$ as $E$ splits in the product space $E\times F$. Let us motivate a couple of the requirements above.
\begin{description}
    \item[\Cref{def:local-trivialisation} (1)] $U$ is required to be open because $W$ inherits part of the topology, and hence the charts in $E$ whose domain is a subset of $U$, 
    \item[\Cref{def:local-trivialisation} (2)] The second requirement implies \textbf{each $\Phi$ is in bijection with $\Phi(\wig{U}) = U\times F$, which is open in $E\times F$}, which will allow us to construct bijections with open subsets of the model space $E\times F$. Furthermore, \cref{eq:local-trivialisation-bijection-restriction-also-bijection} below holds for an arbitrary $V\subseteq X$.
    \begin{equation}\label{eq:local-trivialisation-bijection-restriction-also-bijection}
        \Phi\vert_{\pi^{-1}(U\cap V)}\quad\text{is a bijection onto } U\cap V\times F
    \end{equation}
     \item[\Cref{def:compatibility-local-trivialisations} (1)] The overlap restricts to a toplinear isomorphism on each fiber because, it allows us \textbf{ to quotient out the effects of the trivialisation transitions}, by rehearsing the same 'coproduct and quotient' argument in \Cref{def:concrete-tangent-vector,def:tangent-vector,def:tangent-space}.
     \item[\Cref{def:compatibility-local-trivialisations} (2)] The requirement that the mapping \cref{def:vb-transition-function} is a morphism, turns out to be necessary for $\Phi_{\alpha\beta}$ to be a $C^k$ isomorphism. 
\end{description}
Suppose $W$ is an $F$-vector bundle over $X$ with the trivialisation covering $\{(\wig{U}^\alpha, \Phi_\alpha)\}$. For each $\alpha$, we can cover $U^\alpha$ using chart domains $(U^\alpha_\beta, \varphi^\alpha_\beta)$ in $X$ --- without loss of generality, we can assume $U^\alpha_\beta\subseteq U^\alpha$ by restricting the chart domain and relabelling. \\

Similar to the construction of the induced atlas of a submanifold, given a 'piece' of the original manifold $X$ --- \textbf{instead of dropping the coordinates that correspond to $E_2$, we add an $F$-component to construct a bijection with an open subset of $E\times F$}. This is shown in \cref{eq:vector-bundle-product-chart} 
\begin{equation}\label{eq:vector-bundle-product-chart}
    \wig{\varphi}^{\alpha}_\beta:\wig{U}^\alpha_\beta\longrightarrow\hat{U}^\alpha_\beta \times F \qqtext{defined by} \wig{\varphi}^{\alpha}_\beta = \qty(\varphi^\alpha_\beta\times \id{F})\circ \Phi_\alpha\vert_{\wig{U}^\alpha_\beta}
\end{equation}
\begin{remark}[Hats and wiggles]
    Here, $\wig{U}^\alpha_\beta$ should be interpreted as the inverse image of the open set $U^\alpha_\beta$ through $\pi$. Similarly, $\hat{U}^\alpha_\beta$ is the image of $U^\alpha_\beta$ through $\varphi^\alpha_\beta$.
\end{remark}
The collection of charts $\acal$,  in \cref{eq:vector-bundle-charts-ALPHA} cover $W$ with their chart domains, and each chart is in bijection with an open subset of $E\times F$.
\begin{equation}\label{eq:vector-bundle-charts-ALPHA}
    \mathcal{A} =\bigset{\qty\big(\wig{U}^\alpha_\beta,\: \wig{\varphi}^\alpha_\beta),\:  (\wig{U}^\alpha,\Phi_\alpha) \text{ is in the trivialisation covering of  } W.}
\end{equation}


\begin{wts}[Structure of a vector bundle]\label{prop:structure-of-vector-bundle}
    Let $X$ be a $C^p$ manifold modelled over $E$. If $W$ is a $C^k$ vector bundle modelled on $F$ over the manifold $X$, then $W$ is a $C^k$ manifold modelled on the product space $E\times F$. Furthermore:
    \begin{enumerate}
        \item The \emph{canonical projection} $\pi: W\to X$ is a morphism and a submersion.
        \item $X$ is $C^k$ isomorphic to a submanifold of $W$
    \end{enumerate}
\end{wts}
\begin{proof}
    Suppose we are given two charts in \cref{eq:vector-bundle-charts-ALPHA}, $(\wig{U}^{\alpha_1}_{\beta_1})$, and $(\wig{U}^{\alpha_2}_{\beta_2}, \wig{\varphi}^{\alpha_2}_{\beta_2})$. First, prove that $\wig{\varphi}^{\alpha_1}_{\beta_1}(\wig{U}^{\alpha_1}_{\beta_1}\cap \wig{U}^{\alpha_2}_{\beta_2})$ is open in $E\times F$:
    \begin{align*}
        \wig{\varphi}^{\alpha_1}_{\beta_1}(\wig{U}^{\alpha_1}_{\beta_1}\cap \wig{U}^{\alpha_2}_{\beta_2}) &= \qty[(\varphi^{\alpha_1}_{\beta_1}\times \id{F})\circ \Phi_{\alpha_1}](\wig{U}^{\alpha_1}_{\beta_1}\cap \wig{U}^{\alpha_2}_{\beta_2})\\[1ex]
        &= \qty[(\varphi^{\alpha_1}_{\beta_1}\times \id{F})\circ \Phi_{\alpha_1}](\pi^{-1}(U^{\alpha_1}_{\beta_1}\cap U^{\alpha_2}_{\beta_2})) \\[1ex]
        &= (\varphi^{\alpha_1}_{\beta_1}\times \id{F})\qty((U^{\alpha_1}_{\beta_1}\cap U^{\alpha_2}_{\beta_2})\times F)&&\text{by \cref{eq:local-trivialisation-bijection-restriction-also-bijection}.}
    \end{align*}
    Suppressing restrictions and computing the chart transitions in \cref{eq:VB-trivialisation-overlap-chart-1},
    \begin{equation}\label{eq:VB-trivialisation-overlap-chart-1}
        \wig{\varphi}^{\alpha_2}_{\beta_2}\qty(\wig{\varphi}^{\alpha_1}_{\beta_1})^{-1} = (\varphi^{\alpha_2}_{\beta_2}\times \id{F})\circ \Phi_{\alpha_2}\Phi_{\alpha_1}^{-1}\circ \qty((\varphi^{\alpha_1}_{\beta_1})^{-1}\times \id{F}).
    \end{equation}
    which is clearly a bijection. And it is not hard to see that \cref{eq:VB-trivialisation-overlap-chart-1} can be factored into
    \begin{equation}\label{eq:VB-trivialisation-overlap-chart-2}
        \wig{\varphi}^{\alpha_2}_{\beta_2}\qty(\wig{\varphi}^{\alpha_1}_{\beta_1})^{-1}(x,v)  = \qty\Bigg(\varphi^{\alpha_1\alpha_2}_{\beta_1\beta_2}(x),\: \qty[\theta\circ(\varphi^{\alpha_1}_{\beta_1})^{-1}](x)(v)).
    \end{equation}
    for any $x\in \varphi^{\alpha_1}_{\beta_1}(U^{\alpha_1\alpha_2}_{\beta_1\beta_2})$ and $v\in F$. \textbf{From \cref{eq:VB-trivialisation-overlap-chart-2}, it should now be clear why we demand $k\leq p$ }. The mapping in the second coordinate within \cref{eq:VB-trivialisation-overlap-chart-2} can be reduced to a composition with the evaluation map $\mathbf{E}:\Laut(F)\times F\to F$.
    \begin{equation}\label{eq:VB-trivialisation-evaluation-map-technique}
        \qty[\theta\circ(\varphi^{\alpha_1}_{\beta_1})^{-1}](x)(v) = \mathbf{E}\circ \qty([\theta\circ (\varphi^{\alpha_1}_{\beta_1})^{-1}]\times \id{F}).
    \end{equation}
    Since $\mathbf{E}$ is continuous and bilinear, \cref{eq:VB-trivialisation-evaluation-map-technique} and hence \cref{eq:VB-trivialisation-overlap-chart-1} describes a $C^k$ mapping between open subsets of Banach spaces. It is a morphism, and reversing the roles of the two charts proves its inverse is again a morphism.\\

    To prove $\pi$ is a submersion, recall $W$ is the set-theoretic disjoint union of $F$-fibers. Every element in $W$ can be represented by $(x,v)\in X\times F$. \textbf{We will identify elements of $W$ as elements in $X\times F$. However, this is not a manifold isomorphism}.\\

    Fix $(x,v)\in W$, it is in the domain of some chart $(\wig{U}^{\alpha}_{\beta},\wig{\varphi}^{\alpha}_{\beta})$. The $\pi$-image of the chart domain is $\pi\pi^{-1}(U^{\alpha}_\beta)=U^{\alpha}_{\beta}$ because $\pi$ is surjective. Using \cref{eq:vector-bundle-product-chart} and the diagram found in \cref{fig:local-trivialisation}, the coordinate representation of $\pi$ becomes
    \begin{align}
        \pi_{(\wig{U}^{\alpha}_{\beta}, U^{\alpha}_{\beta})} &= \varphi^\alpha_\beta\circ \pi\circ \Phi_{\alpha}^{-1}\circ \qty((\varphi^{\alpha}_\beta)^{-1}\times \id{F}) \nonumber\\
        &= \varphi^{\alpha}_\beta\circ \proj_1\circ\qty((\varphi^{\alpha}_\beta)^{-1}\times \id{F})\nonumber\\
        &= \proj_1(\id{\hat{U}^{\alpha}_\beta}\times\id{F})\label{eq:VB-canonical-projection-coordinate-representation}
    \end{align}
    We can differentiate both sides of \cref{eq:VB-canonical-projection-coordinate-representation} and if we write $\hat{U} = \hat{U}^{\alpha}_{\beta}$, we obtain \cref{eq:VB-canonical-projection-derivative}.  
    \begin{equation}\label{eq:VB-canonical-projection-derivative}
        D\proj_1(\id{\hat{U}}\times\id{F})(x,v) = \proj_1\in L(E\times F; E)\quad\forall x\in\hat{U},\: v\in F
    \end{equation}
    which means $\pi$ submersion.\\

    Finally, the subset $X\times 0\subseteq W$ is easily shown to be a submanifold of $W$, and is isomorphic to $X$ by dropping the $F$ coordinate and retracing the argument we made in constructing the structure of $W$.
\end{proof}
\begin{remark}[Pair of bundle charts]\label{rmk:pair-of-vb-charts}
    If $X$ is a manifold and $W$ a vector bundle over $X$, the charts realizing the representations of $\pi$ in \cref{eq:VB-canonical-projection-coordinate-representation,eq:VB-canonical-projection-derivative} are called \emph{bundle charts}. 
\end{remark}
% We will refer to vector bundles as bundles from now on.
% Section of a vector bundle:
% commutative diagram.
% A section of the bundle is a morphism A: X\to W such that $\pi A = \id$.
% A local section of the bundle is a section defined on an open subset of $X$.
% We refer to bundle = vector bundle?
\begin{definition}[Section of a vector bundle]\label{def:section-of-VB}
    Let $W$ be a bundle over a manifold $X$. A \emph{section} of $W$ is a morphism $\sigma\in\Mor(X,W)$ such that the diagram in \cref{fig:VB-section-diagram}  commutes, which is synonymous with $\pi\sigma = \id{X}$. A \emph{local section} of $W$ is a morphism $\sigma: U\to W$ where $U\osub X$ is viewed as a submanifold and $\pi\sigma = \id{U}$. We denote the sections of $W$ by $\Gamma(W)$.
    \begin{equation}\label{eq:section-of-vb-symbol}
        \Gamma(W) = \bigset{\sigma: X\to W,\: \sigma \text{ is a section of } W.}
    \end{equation}

    The \emph{zero section} of $W$ is the section $\sigma(p) = 0\in W_p$ for every $p\in X$. If $\sigma$ is a section of $W$, $\supp{\sigma}$ refers to the \emph{support} of $\sigma$, and is defined in \cref{eq:support-of-section}.
    \begin{equation}\label{eq:support-of-section}
        \supp{\sigma} = \cl{\{p\in X,\: \sigma(p)\neq 0\}}
    \end{equation}
\end{definition}
\begin{remark}[Bundle coordinates]\label{rmk:VB-coordinates}
    Let $X$ and $W$ be as in \cref{def:section-of-VB}, and suppose $\sigma$ is a section on $W$. Using a pair of bundle charts, $(U)\in X$ and $(\wig{U})\in W$, we define the \emph{bundle coordinates of $\sigma$} \begin{equation}\label{eq:VB-coordinates}
        \sigma_{U,\wig{U}} = \wig{\varphi}\circ \sigma \circ \varphi^{-1}
    \end{equation}
    expanding the induced chart on $W$ within  \cref{eq:VB-coordinates} reads
    \begin{equation}\label{eq:VB-coordinates-2}
        \sigma_{U,\wig{U}} = (\varphi\times \id{F})\circ \Phi\circ \sigma\circ \varphi^{-1}
    \end{equation}
    Refer to the diagram in \cref{fig:VB-section-coordinates}. We will always use bundle charts when discussing the coordinate representation of a section, and we write
    \[
        \sigma_U = \sigma_{U,\wig{U}} = \hat{\sigma}
    \]
    Sections are precisely the morphisms into $W$ whose coordinate representation resembles that of a graph: $\hat{\sigma}:\hat{U}\to\hat{U}\times F$ and because of this: we identify $\hat{\sigma}(\hat{p}) = (\hat{p},v)$ with $v\in F$.
\end{remark}

% FIGURE WITH TWO DIAGRAMS
\begin{figure}[!h]
% VB Section diagram LINK
% https://q.uiver.app/#q=WzAsMixbMCwwLCJXIl0sWzAsMiwiWCJdLFswLDEsIlxccGkiLDJdLFsxLDAsIlxcc2lnbWEiLDAseyJsYWJlbF9wb3NpdGlvbiI6NjAsIm9mZnNldCI6MSwiY3VydmUiOjR9XV0=
\begin{subfigure}[b]{.5\textwidth}
\centering
\begin{tikzcd}
	W \\
	\\
	X
	\arrow["\pi"{description}, from=1-1, to=3-1]
	\arrow["\sigma"{pos=0.6}, shift right, curve={height=-24pt}, from=3-1, to=1-1]
\end{tikzcd}
\caption{Section of a bundle}
\label{fig:VB-section-diagram}
\end{subfigure}
% VB Section COORDINATES diagram LINK
% % https://q.uiver.app/#q=WzAsNSxbMCwwLCJcXHdpZ3tVfSJdLFswLDIsIlUiXSxbMCw0LCJcXGhhdHtVfSJdLFsyLDAsIlVcXHRpbWVzIEYiXSxbMiwyLCJcXGhhdHtVfVxcdGltZXMgRiJdLFswLDEsIlxccGkiLDFdLFsxLDAsIlxcc2lnbWEiLDAseyJsYWJlbF9wb3NpdGlvbiI6NjAsIm9mZnNldCI6MSwiY3VydmUiOi00fV0sWzEsMiwiXFx2YXJwaGkiLDJdLFswLDMsIlxcUGhpIiwxXSxbMywxLCJcXHByb2pfMSIsMV0sWzMsNCwiXFx3aWd7XFx2YXJwaGl9Il0sWzIsNCwiXFxzaWdtYV97VSxcXHdpZ3tVfSIsMV1d
\hfill\begin{subfigure}[b]{.5\textwidth}
    \centering
    \begin{tikzcd}
	{\wig{U}} && {U\times F} \\
	\\
	U && {\hat{U}\times F} \\
	\\
	{\hat{U}}
	\arrow["\pi"{description}, from=1-1, to=3-1]
	\arrow["\sigma"{pos=0.6}, shift right, curve={height=-24pt}, from=3-1, to=1-1]
	\arrow["\varphi"{description}, from=3-1, to=5-1]
	\arrow["\Phi"{description}, from=1-1, to=1-3]
	\arrow["{\proj_1}"{description}, from=1-3, to=3-1]
	\arrow["{\wig{\varphi}}"{description}, from=1-3, to=3-3]
	\arrow["{\sigma_{U,\wig{U}}}"{description}, from=5-1, to=3-3]
    \end{tikzcd}
    \caption{Local coordinates of a bundle section}
    \label{fig:VB-section-coordinates}
\end{subfigure}
\caption{Diagrams for bundle section and its local representation}
\label{fig:VB-section-both}
\end{figure}
%


% Cotangent bundle?

% \vert_{\wig{U}^{\alpha_1\alpha_2}_{\beta_1\beta_2}}
% This ties into the computing the exterior derivative of a differential form.
% What is the reason for 'taking the covector field of the component function?' and replacing it with a wedge product?
% 


\topheader{Tangent Bundle}
\begin{definition}[Tangent bundle]\label{def:tangent-bundle}
    Let $X$ be a $C^p$ manifold over $E$, the \emph{tangent bundle} is a $E$-vector bundle of rank $p-1$, denoted by $TX$, and
    \[TX=\coprod_{x\in X} T_{x}X.\]
\end{definition}
The construction of the tangent bundle is outlined in \cref{note:tangent-bundle}.
\begin{note}[Construction of the Tangent Bundle]\label{note:tangent-bundle}
Let $X$ be a $C^p$ manifold with $p\geq 1$, so that the tangent space at every point is defined. If $p\in (U_i,\varphi_i)$ for $i=1,2$. Then $\varphi_{12}$ is a $C^p$ isomorphism between $\varphi_1(U_{12})$ and $\varphi_2(U_{12})$; \textbf{whose derivative is a $C^{p-1}$ map into $\Laut(E)$ that encodes the transformation between the concrete tangent spaces}. In the notation of \cref{eq:tangent-space-overlap-motivation}, this means
\[
    x\mapsto D\varphi_{12}(x)\qqtext{is in } C^{p-1}(\hat{U}_{12}, \Laut(E)).
\]
In fact, the tangent bundle $TX \defined \coprod_{p\in X}T_p X$ is a $C^{p-1}$ vector bundle (modelled on $E$) over $X$. If $(U,\varphi)$ is a chart in $X$, it induces a local trivialisation on $TX$ by taking each tangent vector $v\in T_p X$ to its concrete representation $(p,\hat{v})\in X\times E$.
\begin{equation}\label{eq:tangent-bundle-local-trivialisation}
    \Phi: \wig{U}\to U\times E\qqtext{and} \Phi(v) = (p,\hat{v})
\end{equation}
where $(U,\varphi, p,\hat{v})$ is a concrete representation of $v\in T_pX$.
\end{note}
Similarly, we have the cotangent bundle which is modelled on toplienar dual of the tangent spaces of $X$.
\begin{definition}[Cotangent bundle]\label{def:cotangent-bundle}
    Let $X$ be a $C^p$ manifold over $E$, the \emph{cotangent bundle} is a $E$-vector bundle of rank $p-1$, denoted by $T^*X$, and
    \[T^*X = \coprod_{x\in X}T_xX^*,\]
    where $T_xX$ is toplinearly isomorphic to $X$, and $T_xX^*$ its toplinear dual.
\end{definition}

\topheader{Notes and References}
\subsubsection*{Category Theory}
% Motivation for functorality
Let $X$ and $E_i$ be Banach spaces for $i = \underline{2}$. We discussed the difference in the role that a toplinear mapping $f\in L(E_1,E_2)$ plays in pushing points from $E_1\to E_2$, and the role it plays from pushing \emph{incoming maps} with source $X$ from $L(X,E_1)\to L(X,E_2)$ by composing the incoming map with itself. 
\begin{equation}\label{eq:toplinear-mapping-functorality-motivation}
    f: E_1\to E_2\qqtext{and}f_{c}: L(X,E_1)\to L(X,E_2)
\end{equation}
where the $c$ within $f_c$ stands for composition. This is summarized in \cref{fig:functorality-motivation-hom}

% Commutative diagram for functorality motivation
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJYIl0sWzIsMCwiRV8yIl0sWzIsMiwiRV8yIl0sWzAsMSwiXFxsYW1iZGEiLDFdLFsxLDIsImYiLDFdLFswLDIsIlxcbGFtYmRhX3tjfShmKSIsMV1d
\begin{figure}[!h]
\centering
\begin{tikzcd}
	X && {E_2} \\
	\\
	&& {E_2}
	\arrow["\lambda"{description}, from=1-1, to=1-3]
	\arrow["f"{description}, from=1-3, to=3-3]
	\arrow["{\lambda_{c}(f)}"{description}, from=1-1, to=3-3]
\end{tikzcd}
\caption{Functorality through post-composition}
\label{fig:functorality-motivation-hom}
\end{figure}

The two maps $f$ and $f_c$ often thought of as the same, and we can identify $f$ with two separate actions. Here, it is not so obvious why we need the concept of functorality, a closer look at the \textbf{different roles that the same mathematical object can play} will surely motivate the above discussion. \\

Let $E_i$ be Banach spaces, $f\in C^p(E_1,E_2)$ and $\lambda\in L(E_2, E_3)$. 
\begin{itemize}
    \item The derivative of $f$ is a continuous map $Df: E_1\to L(E_1,E_2)$.
    \item The derivative of $\lambda$ (now 'identified with $\lambda\in C^p(E_2,E_3)$), is continuous constant map from $E_2$ to $L(E_2,E_3)$
\end{itemize}
\begin{equation}
    D(\lambda\circ f) = \lambda\circ Df(x)
\end{equation}

% This is very similar to the case where we identify a number c\in\real by its action on \real by multiplication.
% Or when we identify $p$ an element in $E$, a Banach space by the clm $t\mapsto tp$ where $t\in\real$.

 but what if we have a multi-linear map whose destination is $E_1$, and what about symmetric/alternating multi-linear maps, continuous maps, $C^p$ morphisms? Should we let $f$ take on all of those roles as well? Should we identify $f$ with its adjoint as well? 
This is the first of the many problems.\\

The problem becomes even clearer when we look at maps between $F$-fibers. Fix a manifold $X$ and $F_i$-bundles $W^i$ over $X$ for $i = \underline{2}$. Suppose $A:X\to W^1$ is a section on $W^1$, and $\lambda\in L(F_1, F_2)$.\\

At each point $p\in X$, our linear map $\lambda$ can be identified with the linear map that acts between the fibers.
\[
\lambda_p: W^1_p\to W^2_p
\]
which is toplinear hence a morphism. Our main problem is concerned with the conditions under which the composition $\lambda A$ --- as defined in \cref{eq:motivation-functorality} --- is a morphism.
\begin{equation}\label{eq:motivation-functorality}
    \lambda A: X\to W^2\qqtext{and} (\lambda A)(p) = \lambda_p (A_p)\in W_p^2
\end{equation}

Under what conditions can a morphism take on additional roles? The mapping $\lambda_p$ on each tangent space is a $C^p$ morphism in the manifold sense, and the morphisms that preserve the $C^p$ smoothness of sections are called VB morphisms. Which we will define after some more category theory. \\

For the remainder of this section, let $C_1$ and $C_2$ be categories. We denote the objects of $C_1$ by $E_i$, and the objects of $C_2$ by $F_i$.
\begin{definition}[Functor]\label{def:functor}
     A correspondence $\theta$ between $C_1$ and $C_2$ is called a \emph{functor} --- which we denote by $\theta: C_1\rightrightarrows C_2$ --- if all of the following rules satisfied.
    \begin{description}
    \item[Ob1] $\theta$ maps objects in $C_1$ to objects in $C_2$. We write
    \begin{equation}\label{eq:functor-objects-correspondence}
        \forall E\in Ob(C_1),\quad E^{\theta}=\theta(E)\in Ob(C_2)
    \end{equation}
    \item[Mor1] $\theta$ associates morphisms in $C_1$ to morphisms in $C_2$ that respects Ob1. 
    \begin{equation}\label{eq:functor-morphisms-correspondence}
        \forall f\in \Mor_{C_1}(E_1,E_2),\quad \theta(f)\in \Mor_{C_2}(E_1^\theta, E_2^\theta)
    \end{equation}
    \item[Mor2] Identity is associated with identity: $\theta(\id{E})  = \theta(\id{\theta(E)})$.
    \item[Mor3] Commutes with inversion: $\theta(f^{-1}) = \theta(f)^{-1}$ if the inverse of $f$ exists.
    \item[Mor4] Functoral: $\theta(g\circ f) = \theta(g)\circ \theta(f)$.
    \end{description}
\end{definition}


% Remember: a functor is not a mapping between elements of the objects, it is a correspondence between objects in a category. Functors are correspondences between categories. Transforming a problem in one category to another. This is very powerful in algebraic topology.
% \begin{itemize}
% \item Category = Top. spaces, and  Groups
% \item Objects = $[0,1],\real,L^p$, and $GL(n,\real)$,
% \item Morphisms = $C([0,1], X)$ (the space of curves) and $\det: GL(n,\real)\to (\real\setminus 0, \times)$.
% \item Functors = The Homotopy functor, that sends each pointed topological space to a group (the fundamental group), and to each pointed continuous function to a homomorphism between fundamental groups.
% \end{itemize}

% Notes: special notation for incoming and outgoing functors?

\begin{note}[The $\Hom_X$ functor]\label{note:hom-functor}
    We continue our discussion from \cref{fig:functorality-motivation-hom}. Recall $\RealBanach$ is the category of Banach spaces over $\real$, and we will refer to toplinear morphisms as morphisms for brevity. If $X$ is an object in $\RealBanach$,  the \emph{$\operatorname{Hom}_X$ functor} is a covariant functor between $\RealBanach$ and $L(X, \cdot)$ --- the space of toplinear mappings with source $X$ such that
    \begin{enumerate}
        \item to each $E_i\in \Ob(\RealBanach)$ $\Hom_X(E_i) = L(X,E_i)$ --- \textbf{the space of incoming morphisms with source $X$}, and 
        \item to each morphism $f\in L(E_1,E_2)$ another morphism between $L(X,E_1)$ and $L(X,E_2)$ --- denoted by $(\operatorname{Hom}_X)f$. 
        \item The functor $\operatorname{Hom}_X$ converts \textbf{outgoing morphisms from $E_1$ to the redirection morphism of incoming morphisms with source $X$}.
    \end{enumerate}
    Notice this is precisely what the diagram in \cref{fig:functorality-motivation-hom} describes.
\end{note}

\begin{wts}[$\Hom_X$ functor is a functor]\label{prop:verification-hom-functor}
    The $\Hom_X$ functor as defined in \cref{note:hom-functor} is a covariant functor.
\end{wts}
\begin{proof}
    Postponed.
\end{proof}

\begin{note}[The tangent space functor]\label{note:tangent-space-functor}
Let $X$ be a $C^1$ manifold, we call the tuple $(p,X)$ for $p\in X$ the \emph{centering of $X$ centered at $p$}. The category of pointed manifolds, denoted by $\operatorname{Man}_{*}$. Its objects consist of all centerings across $C^1$ manifolds, and the morphisms in $\operatorname{Man}_{*}$ are called \emph{pointed morphisms}. \\

If $(q,Y)$ is another object in $\operatorname{Man}_{*}$, a pointed morphism between $(p,X)$ and $(q,Y)$ is a tuple $(p,f)$; where $f$ is a manifold morphism between $X$ and $Y$ and $f(p) = q$. We sometimes write $f_p=(p,f)$ when it is clear.\\

The \emph{tangent space functor}, denoted by $T:\operatorname{Man}_{*}\rightrightarrows \RealBanach$ is a covariant functor where
\begin{itemize}
    \item we define $T(p,X)= T_pX$ that takes a pointed $C^1$ manifold to its tangent space, and
    \item to each pointed $C^1$ morphism $f_p\in\Mor_{\operatorname{Man}_{*}}( (p,X)\,(q,Y))$ we associate with the toplinear mapping 
    \begin{equation}\label{eq:tangent-space-functor-morphism-action}
        Tf_p = df(p): T_p X\to T_{q}Y
    \end{equation}
\end{itemize}
\end{note}
\begin{wts}[Tangent space functor is a functor]\label{prop:verification-tangent-space-functor}
    The tangent space functor as defined in \cref{note:tangent-space-functor} is a covariant functor.
\end{wts}
\begin{proof}
    Postponed.
\end{proof}
We leave the verification that $T$ satisfies the properties in \cref{def:functor} as an exercise. Dual to the concept of a functor is that of the cofunctor, which --- for our purposes --- captures the idea of the toplinear adjoint.

\begin{definition}[Cofunctor]\label{def:cofunctor}
    Let $C_1$ and $C_2$ be categories. A correspondence $\eta: C_1\leftrightarrows C_2$ is called a \emph{cofunctor} (or a contravariant functor) if all of the following rules are satisfied.
    \begin{description}
        \item[Ob] $\eta$ maps objects in $C_1$ to objects in $C_2$. We write $E^\lambda = \lambda(E)\in \Ob(C_2)$ for every $E\in\Ob(C_1)$.
        \item[Mor1] $\eta$ associates morphisms in $C_1$ to morphisms in $C_2$ that respects Ob1. 
        \begin{equation}\label{eq:cofunctor-morphisms-correspondence}
            \forall f\in \Mor_{C_1}(E_1,E_2),\quad \eta(f)\in \Mor_{C_2}(E_2^\eta, E_1^\eta)
        \end{equation}
        \item[Mor2] Identity is associated with identity: $\eta(\id{E})  = \eta(\id{\eta(E)})$.
        \item[Mor3] Commutes with inversion: $\eta(f^{-1}) = \eta(f)^{-1}$ if the inverse of $f$ exists.
        \item[Mor4] Cofunctoral: $\eta(g\circ f) = \eta(f)\circ \eta(g)$.
    \end{description}

\end{definition}
\begin{remark}[Cofunctors are opposite to functors]
    The cofunctor $\eta$ reverses the arrows a morphism $f$. Refer to \cref{fig:functor-cofunctor-comparison} for a comparison between \cref{eq:cofunctor-morphisms-correspondence} and \cref{eq:functor-morphisms-correspondence}.
\end{remark}


\begin{note}[The $\Hom^X$ cofunctor]
    Let $X\in\Ob(\RealBanach)$, it defines a cofunctor from $\RealBanach\leftrightarrows L(\cdot, X)$ where $L(\cdot, X)$ is the space of toplinear mappings whose destination is $X$.
    \begin{enumerate}
        \item to each $E_i\in \Ob(\RealBanach)$ $\Hom^X(E_i) = L(E_i,X)$ --- \textbf{the space of outgoing morphisms with destination $X$}, and 
        \item to each morphism $f\in L(E_1,E_2)$ another morphism between $L(E_1,X)$ and $L(E_2,X)$ --- denoted by $(\operatorname{Hom}^X)f$. 
        \item The functor $\operatorname{Hom}^X$ converts \textbf{outgoing morphisms from $E_1$ to the precomposition morphism which acts on morphisms with destination $X$}.
    \end{enumerate}
\end{note}
% https://q.uiver.app/#q=WzAsNixbMiwwLCJFXzEiXSxbMiwyLCJFXzIiXSxbNCwyLCJcXHRoZXRhKEVfMikiXSxbNCwwLCJcXHRoZXRhKEVfMSkiXSxbMCwwLCJcXGV0YShFXzEpIl0sWzAsMiwiXFxldGEoRV8yKSJdLFswLDEsImYiLDFdLFsxLDIsIlxcdGhldGEiLDFdLFswLDMsIlxcdGhldGEiLDFdLFszLDIsIlxcdGhldGEoZikiLDFdLFswLDQsIlxcZXRhIiwxXSxbMSw1LCJcXGV0YSIsMV0sWzUsNCwiXFxldGEoZikiLDFdXQ==
\begin{figure}[!h]
\centering
\begin{tikzcd}
	{\eta(E_1)} && {E_1} && {\theta(E_1)} \\
	\\
	{\eta(E_2)} && {E_2} && {\theta(E_2)}
	\arrow["f"{description}, from=1-3, to=3-3]
	\arrow["\theta"{description}, from=3-3, to=3-5]
	\arrow["\theta"{description}, from=1-3, to=1-5]
	\arrow["{\theta(f)}"{description}, from=1-5, to=3-5]
	\arrow["\eta"{description}, from=1-3, to=1-1]
	\arrow["\eta"{description}, from=3-3, to=3-1]
	\arrow["{\eta(f)}"{description}, from=3-1, to=1-1]
\end{tikzcd}
\caption{Functor $\theta$ vs. cofunctor $\eta$ comparison}
\label{fig:functor-cofunctor-comparison}
\end{figure}
%\cref{fig:functor-cofunctor-comparison}
%
%
%
\fchapter{3: Coordinates}
\topheader{Introduction}
In the previous chapters, a chart $(U,\varphi)$ was often equated with its domain. We will now express a concrete tangent vector as $(\hat{p}, \hat{v})$, omitting any reference to the chart or its domain. \\
%
Let $X$ be a manifold and $F$ a Banach space. Consider a morphism $f \in \Mor(X,F)$ and fix a point $p \in X$, and write $q = f(p)$. By adopting the canonical interpretation $\cl{w}$ for a tangent vector $w \in T_q F$ (as discussed in \cref{rmk:omission-of-chart-in-concrete-rep}), we 
%
\begin{itemize}
    \item reinterpret the differential at $p$ $df_p$ as a linear map from $T_p X$ to $F$,
    \item always use the standard chart $(\id{F}, F)$ so that $\hat{f} = f_{U,F}$.
\end{itemize}
%
% Add some motivation for why we onlyl consider finite dimensional manifolds here.
%
In this context, morphisms into $\real$ almost serve as test functions in the framework of distribution theory. This requires a definition.
%
\begin{definition}[Function on $X$]\label{def:function-on-X}
    Let $X$ be a manifold of class $C^p$ over $\realn$ for $n,p\geq 1$. A \emph{function} on $X$ is a morphism $f: X\to\real$, where $\real$ should be interpreted as a manifold. We denote the commutative ring of functions on $X$ by $C^p(X,\real)$ or $C^p(X)$. If $U$ is an open subset of $X$, its functions are denoted by $C^p(U,\real)$ or $C^p(U)$.
\end{definition}
%
\topheader{Exterior Derivative}
Let $X$ be a manifold, and $f\in C^p(X)$. If $\gamma: (-\delta, +\delta)\to X$ is a curve starting at $x_0\in X$ with velocity $v$, the composition $f\circ \gamma$ is a morphism. Let us write 
\begin{equation}
    F:(-\delta,+\delta)\to \real,\quad F(\varepsilon) = f\circ \gamma(\varepsilon) - f\circ\gamma(0)
    \label{eq:exterior-derivative-motivation-1-form-1}
\end{equation}
Suppose we wish to measure the rate at which $f$ moves in the direction of $v$, then we can simply take the derivative of \cref{eq:exterior-derivative-motivation-1-form-1}. We define the \emph{exterior derivative of $f$ at $x_0$}, denoted by $df(x_0): T_{x_0}X\to\real$ by \cref{eq:exterior-derivative-motivation-1-form-2}
\begin{equation}
    df(x_0)(v) = DF(0)(\cl{1})\qqtext{where} F = f\circ \gamma
    \label{eq:exterior-derivative-motivation-1-form-2}
\end{equation}
for any curve starting at $x_0$ with velocity $v$.\\
% Given a way of measuring k-dimensional volumes, the exterior derivative gives rise to a k+1 realvalued function in k+1 arguments at a point.

Let $E$ be a Banach space, and suppose $\omega$ is a $k$-form on $E$, and $x_0\in E$ with $k+1$ tangent vectors $v_{\underline{k+1}}$. The parallelopiped defined by the $k+1$ vectors is 
\[
    P_{x_0}(v_{\underline{k+1}}) = \bigset{x_0 + \sum_{i=\underline{k+1}} t_iv_i,\: 0\leq t_i\leq 1\: \forall i = \underline{k+1}}
\]
% We can rewrite $P_{x_0}(v_{\underline{k+1}}) = x_0 + P(v_{\underline{k+1}})$ where $P_0(\cdot) = P(\cdot)$. 
As with \cref{eq:exterior-derivative-motivation-1-form-1}, we can integrate over the boundary defined by $P_{x_0}(v_{\underline{k+1}})$, and obtain a new function. We can shrink each $v_i$ by $\varepsilon_i$, and we define
\begin{equation}
    P_{x_0}^{\varepsilon_{\underline{k+1}}}(v_{\underline{k+1}}) = \bigset{x_0 + \sum_{i=\underline{k+1}} t_iv_i,\: 0\leq t_i\leq \varepsilon_i\: \forall i = \underline{k+1}}
    \label{eq:exterior-derivative-motivation-k-form-shrinkage}
\end{equation}
(Note: Perhaps after shrinking the domain of $F$, here we should replace everything by their coordinate representations).
\begin{equation}
    F:(-\delta,+\delta)^{k+1}\to \real,\quad F(\varepsilon_{\underline{k+1}}) = \int_{\partial P_{x_0}^{\varepsilon_{\underline{k+1}}}(v_{\underline{k+1}})}\omega
    \label{eq:exterior-derivative-motivation-k-form-1}
\end{equation}
We define the exterior derivative of a $k$-form by the map $DF(0)(1^{(k+1)})$.
\topheader{Derivations}
%
% Some more motivation for this? 'If $f$ is only defined on an open subset of a Banach space then its derivative allows us access to the underlying Banach space structure even if $f$ is defined on a very small patch in $E$?
%
\textbf{For the rest of this chapter, assume all manifolds to be $C^\infty$ manifolds over $\realn$}. 
\begin{definition}[Algebra of germs]
    Let $X$ be a manifold, and $p\in X$. A \emph{germ at $p$} is an equivalence class of smooth functions, under the relation $f\sim g$ iff $f = g$ on some neighbourhood of $p$. The \emph{algebra of germs a $p$} is denoted by $C_p^\infty(X)$, under pointwise multiplication.
\end{definition}
\begin{definition}[Derivation at a point]
    A \emph{derivation} at a point $p$ is a linear functional $\nu\in {C_p^\infty(X)}^*$ on the space of germs, that satisfies the product rule:
    \[
        \nu(m(\UL{f}[k])) = \sum_{i=\underline{k}} m(\UL{f}[i-1](p),\nu f_{i-1},\UL{f}[i+][k-i]),
    \]
    where $m$ denotes pointwise multiplication. The set of derivations at $p$ is denoted by $\dzz_p X$.
\end{definition}
We turn to the case in $\realn$. Let $\hat{U}$ be an open subset of $\realn$, and $\hat{p}\in\hat{U}$. To every smooth function $\hat{f}\in C^\infty(U,\real)$, and $\hat{v}\in T_{\hat{p}}\hat{U}=\realn$, we define
\[
    \langle \hat{v}, \hat{f}\rangle_{T_{\hat{p}}\hat{U}} = D\hat{f}(\hat{p})(\hat{v}).
\]
We remark that the right member can be computed using $\langle\hat{v},\grad \hat{f}(\hat{p})\rangle_{\realn}$. Furthermore, $\hat{f} = \hat{g}$ on some neighbourhood about $\hat{p}$, iff $\langle\hat{v},\hat{f} - \hat{g}\rangle_{T_{\hat{p}}\hat{U}}=0$; and the product rule tells us that $\langle\hat{v},\cdot\rangle_{T_{\hat{p}}\hat{U}}$ is a derivation. On the other hand, the components of $\hat{v}$ can be computed by deriving the coordinate functions: $\langle\hat{v},e_i\rangle_{T_{\hat{p}}\hat{U}} = \hat{v}^i$. 
\begin{wts}[$\dzz_p X$ is isomorphic to $T_p X$]
    Let $X$ be a manifold and $p\in X$. To every tangent vector $v\in T_p X$, and $f\in C^\infty_p(X)$,
    \[
        \langle v, f\rangle_{T_p X} = Df_{U,\real}(\hat{p})(\hat{v})
    \]
\end{wts}
Let $E$ and $F$ be Banach spaces and $U\osub E$, suppose $f$ is a morphism from $U$ to $F$. If $p$ is a point in $U$, $Df(p)$ is of course a linear map from $E$ to $F$; this suggests a natural pairing $\hat{\dzz}$ of $f$ with and $(p,v)\in U\times E$ as shown in \cref{eq:derivation-natural-pairing-motivation}.
\begin{equation}\label{eq:derivation-natural-pairing-motivation}
    \hat{\dzz}: (U\times E)\times C^k(U,F)\longrightarrow F:\quad \qty\Big((p,v), f)\mapsto Df(p)(v)\in F
\end{equation}
%
Suppose $F = \real$ and denote pointwise multiplication on $\real$ by $m$. The above pairing trivially satisfies the product rule displayed in \cref{eq:derivations-product-rule}.
\begin{equation}\label{eq:derivations-product-rule}
    Dm(\UL{f}[k])(p)(v) = \sum_{i=\underline{k}}m(\UL{f}[i-1](p),D f_i(p)(v),\UL{f}[i+][k-i](p))
\end{equation}
where $\UL{f}[k]\in C^p(U,\real)$. Next, if $f$ is a function (from a manifold $X$) defined on an open neighbourhood $U$ of $p$. If $v\in T_p X$, the commentary in the introduction suggests a 'duality pairing' between $f$ and $(p,v)$ in the form of \cref{eq:tangent-vector-abstract-action}.
\begin{equation}\label{eq:tangent-vector-abstract-action}
    \dzz: (U\times E)\times C^p(U,F)\longrightarrow F\qqtext{and} \dzz\qty\Big((p,v),f) = df_p(v)
\end{equation}
\textbf{By definition of the differential $df_p$}, the right hand side of \cref{eq:tangent-vector-abstract-action} is representation independent, hence
\begin{equation}\label{eq:tangent-vector-concrete-action}
    \dzz((p,v), f) =  D\hat{f}(\hat{p})(\hat{v}),\quad\text{where the right member is an ordinary derivative}
\end{equation}
for any representation $(\hat{p},\hat{v})$, $\hat{f}$. We also see that $\dzz((p,v), f) = \hat{\dzz}((\hat{p},\hat{v}),\hat{f})$, which shows functions defined on $U$ are dual to $T_p X$ for each $p\in U$. We will make this notion precise when we introduce covectors.
%
\begin{definition}[Derivation at $p$]\label{def:derivation-at-p}
A \emph{derivation at $p$} is a \textbf{linear functional} $v$ on $C^p(U,\real)$, where $U$ is any neighbourhood of $p$; such that for $\UL{f}[k]\in C^p(U)$, \cref{eq:derivations-product-rule-abstract} holds. 
\begin{equation}\label{eq:derivations-product-rule-abstract}
    v\qty(m(\UL{f}[k])) = \sum_{i=\underline{k}}m(\UL{f}[i-1](x), v(f_i),\UL{f}[i+][k-i](x))
\end{equation}
We will denote the space of derivations at $p$ by $\dzz_p(X)$, and if $v\in \dzz_p(X)$, we say $v$ \emph{derives} $f$ for any function $f$ defined about $p$.
\end{definition}
%
%
%
We have shown every tangent vector is a derivation, since the product rule descends from \cref{eq:derivations-product-rule} and its computation in coordinates in \cref{eq:tangent-vector-concrete-action}.  If $X$ is finite-dimensional, \cref{prop:tangent-space-isomorphic-to-derivations-finite-dimensional} shows derivations at a point $p\in X$ are uniquely represented by a tangent vector.
%
%
\begin{wts}[$T_p X$ is isomorphic to $\dzz_p(X)$]\label{prop:tangent-space-isomorphic-to-derivations-finite-dimensional}
Let $p$ be a point on a manifold $X$, then its tangent space is isomorphic to the vector space of derivations. If $(\hat{p},\hat{v})$ is a concrete tangent vector, its derivation of $f$ computed using \cref{eq:tangent-vector-concrete-action}.
\end{wts}
\begin{proof}
    Postponed.
\end{proof}
\topheader{Boundary}
% Define the half space.
% Manifolds with boundary defined a the half space.
% Inward, outward, and tangent vectors.
    % The definition should be using the curves with domains (-\varepsilon, 0] and [0,+\varepsilon)
    %
% Recap the submanifold tangent space criterion? An abstract tangent vector is in the exterior tangent space of the submanifold if its concrete repreresentation in a slice chart is 
\begin{definition}[Subsets of the upper half-plane]\label{def:subsets-of-upper-half-plane}
    Let $n\geq 1$, the \emph{upper half plane} of $\realn$ is the subset $\halfn = [x^n\geq 0]$. Its topological interior (resp. boundary) is denoted by $\Int\halfn = [x^n>0]$ (resp. $\partial\halfn = [x^n=0]$).
\end{definition}
We wish to define a notion of the boundary for a manifold. Instead of modelling $X$ on open subsets of $\realn$, we consider open subsets of both $\realn$ and $\halfn$. To wit, we start by generalizing the notion of $C^p$ smoothness between \textbf{arbitrary subsets of $\realn$}. Let $S\subseteq\realn$ be a subset of $\realn$, recall that:
\begin{quote}
    A function $f: S\to\realm$ is said to be continuous on $S$, if $f^{-1}(U)$ is relatively open in $S$ for every $U\osub \realm$.
\end{quote}
The take-away intuitinon for this is that manifolds with boundary are supposedly used to model geometric objects that are suddenly 'cut off'. In the case of the upper half-plane, this manifests in a sudden stop in the $n$-th coordinate. The morphisms we seek are the ones which are ordinary morphisms but whose domains 'cut off'.
\begin{quote}
Let $F:S\to S'$ be a mapping between arbitrary subsets of $\realn$ and $\realm$. It is a $C^p$ morphism, whenever each point $p\in S$ admits a $C^p$ extension to a neighbourhood containing $p$.    
\end{quote}
With this, a $C^p$ isomorphism between subsets of $\realn$ is a bijective $C^p$ morphism whose inverse is also a $C^p$ morphism.
% Equivalently, this means that $f$ is a continuous function iff it is the restriction of a continuous mapping $\wig{f}: W\to\realn$ where $W$ is an open neighbourhood containing $S$.
\begin{definition}[Boundary chart]\label{def:boundary-chart}
    Let $X$ be a non-empty subset. A \emph{boundary chart} on $X$ modelled on $\realn$ is a tuple $(U,\varphi)$, such that $U\subseteq X$, $\varphi(U) =\hat{U}$ is an open subset of $\halfn$, and $\varphi$ is a bijection onto $\hat{U}$.
\end{definition}
To distinguish between this new definition of the previous one, the word \emph{chart} will always refer to the charts defined in Chapter 1. If we wish to be precise, we will use the word \emph{interior chart}. 
\begin{definition}[Compatibility between boundary and interior charts]\label{def:boundary-interior-charts}
    Let $(U,\varphi)$ and $(V,\psi)$ be boundary or interior charts of $X$, modelled on $\realn$ or $\halfn$. They are called \emph{$C^p$-compatible} (for $p\geq 0$) if $U\cap V=\varnothing$, or both of the following hold:
    \begin{itemize}
        \item $\varphi(U\cap V)$ and $\psi(U\cap V)$ are \emph{both} open subsets of $\realn$ or $\halfn$.
        \item the \emph{transition map} $\psi\circ\varphi^{-1}:\varphi(U\cap V)\to\psi(U\cap V)$ is a $C^p$ isomorphism between open subsets of $\realn$ or $\halfn$.
    \end{itemize}
\end{definition}
\begin{definition}[Boundary atlas, structure with boundary]
    Let $X$ be a non-empty set and $p\geq 0$. A $C^p$ \emph{boundary atlas} on $X$ modelled on $\realn$ is a pairwise $C^p$-compatible collection of charts $\{(U_{\alpha},\varphi_{\alpha})\}$ whose union over the domains cover $X$.\\

    If $\acal$ is a boundary atlas of $X$, the maximal boundary atlas containing $\acal$ is called the \emph{$C^p$ boundary structure determined by $\acal$}. A $C^p$ \emph{manifold with boundary} modelled on $\realn$ is a a non-empty set $X$ with a $C^p$ boundary structure modelled on $\realn$.
\end{definition}
We also have the following terminology for points in a manifold with boundary $X$. Let $p\in X$,
\begin{itemize}
    \item $p$ is called a \emph{boundary point} whenever it is in the domain of a boundary chart $(U,\varphi)$, \textbf{and $\varphi(p)\in\partial\halfn$},
    \item $p$ is called an \emph{interior point} otherwise.
\end{itemize}
\begin{remark}
    It can be shown (using deRham cohomology, see Chapter 16-17 \cite{Lee2013Introduction}) that a point on a manifold cannot be a boundary point and an interior point at the same time.
\end{remark}


\ifSubfilesClassLoaded{%
  \bibliography{v2-subfiles/manifolds-references}%
}{}

\end{document}